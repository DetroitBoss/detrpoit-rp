{"id":"ZCoL","dependencies":[{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\package.json","includedInParent":true,"mtime":1695992238040},{"name":"engine.io-client","loc":{"line":4,"column":20,"index":123},"parent":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\manager.js","resolved":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\node_modules\\engine.io-client\\lib\\index.js"},{"name":"./socket","loc":{"line":5,"column":25,"index":169},"parent":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\manager.js","resolved":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\socket.js"},{"name":"component-emitter","loc":{"line":6,"column":24,"index":206},"parent":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\manager.js","resolved":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\node_modules\\component-emitter\\index.js"},{"name":"socket.io-parser","loc":{"line":7,"column":23,"index":251},"parent":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\manager.js","resolved":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\node_modules\\socket.io-parser\\dist\\index.js"},{"name":"./on","loc":{"line":8,"column":21,"index":293},"parent":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\manager.js","resolved":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\on.js"},{"name":"backo2","loc":{"line":9,"column":24,"index":326},"parent":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\manager.js","resolved":"D:\\DETROIT\\server\\node_modules\\backo2\\index.js"},{"name":"debug","loc":{"line":10,"column":22,"index":359},"parent":"D:\\DETROIT\\server\\node_modules\\socket.io-client\\build\\manager.js","resolved":"D:\\DETROIT\\server\\node_modules\\debug\\src\\browser.js"}],"generated":{"js":"\"use strict\";function t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function i(e){var n=r(e,\"string\");return\"symbol\"===t(n)?n:String(n)}function r(e,n){if(\"object\"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,n||\"default\");if(\"object\"!==t(i))return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===n?String:Number)(e)}function c(){return(c=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=s(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function s(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var n,o=y(t);if(e){var i=y(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return f(this,n)}}function f(e,n){if(n&&(\"object\"===t(n)||\"function\"==typeof n))return n;if(void 0!==n)throw new TypeError(\"Derived constructors may only return object or undefined\");return h(e)}function h(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function p(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Manager=void 0;var d=require(\"engine.io-client\"),v=require(\"./socket\"),m=require(\"component-emitter\"),b=require(\"socket.io-parser\"),k=require(\"./on\"),_=require(\"backo2\"),g=require(\"debug\")(\"socket.io-client:manager\"),w=function(n){a(r,m);var i=l(r);function r(n,o){var c;e(this,r),(c=i.call(this)).nsps={},c.subs=[],n&&\"object\"===t(n)&&(o=n,n=void 0),(o=o||{}).path=o.path||\"/socket.io\",c.opts=o,c.reconnection(!1!==o.reconnection),c.reconnectionAttempts(o.reconnectionAttempts||1/0),c.reconnectionDelay(o.reconnectionDelay||1e3),c.reconnectionDelayMax(o.reconnectionDelayMax||5e3),c.randomizationFactor(o.randomizationFactor||.5),c.backoff=new _({min:c.reconnectionDelay(),max:c.reconnectionDelayMax(),jitter:c.randomizationFactor()}),c.timeout(null==o.timeout?2e4:o.timeout),c._readyState=\"closed\",c.uri=n;var s=o.parser||b;return c.encoder=new s.Encoder,c.decoder=new s.Decoder,c._autoConnect=!1!==o.autoConnect,c._autoConnect&&c.open(),c}return o(r,[{key:\"reconnection\",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:\"reconnectionAttempts\",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:\"reconnectionDelay\",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:\"randomizationFactor\",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:\"reconnectionDelayMax\",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:\"timeout\",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:\"maybeReconnectOnOpen\",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:\"open\",value:function(t){var e=this;if(g(\"readyState %s\",this._readyState),~this._readyState.indexOf(\"open\"))return this;g(\"opening %s\",this.uri),this.engine=d(this.uri,this.opts);var n=this.engine,o=this;this._readyState=\"opening\",this.skipReconnect=!1;var i=k.on(n,\"open\",function(){o.onopen(),t&&t()}),s=k.on(n,\"error\",function(n){g(\"error\"),o.cleanup(),o._readyState=\"closed\",c(y(r.prototype),\"emit\",e).call(e,\"error\",n),t?t(n):o.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;g(\"connect attempt will timeout after %d\",a),0===a&&i();var u=setTimeout(function(){g(\"connect attempt timed out after %d\",a),i(),n.close(),n.emit(\"error\",new Error(\"timeout\"))},a);this.subs.push(function(){clearTimeout(u)})}return this.subs.push(i),this.subs.push(s),this}},{key:\"connect\",value:function(t){return this.open(t)}},{key:\"onopen\",value:function(){g(\"open\"),this.cleanup(),this._readyState=\"open\",c(y(r.prototype),\"emit\",this).call(this,\"open\");var t=this.engine;this.subs.push(k.on(t,\"ping\",this.onping.bind(this)),k.on(t,\"data\",this.ondata.bind(this)),k.on(t,\"error\",this.onerror.bind(this)),k.on(t,\"close\",this.onclose.bind(this)),k.on(this.decoder,\"decoded\",this.ondecoded.bind(this)))}},{key:\"onping\",value:function(){c(y(r.prototype),\"emit\",this).call(this,\"ping\")}},{key:\"ondata\",value:function(t){this.decoder.add(t)}},{key:\"ondecoded\",value:function(t){c(y(r.prototype),\"emit\",this).call(this,\"packet\",t)}},{key:\"onerror\",value:function(t){g(\"error\",t),c(y(r.prototype),\"emit\",this).call(this,\"error\",t)}},{key:\"socket\",value:function(t,e){var n=this.nsps[t];return n||(n=new v.Socket(this,t,e),this.nsps[t]=n),n}},{key:\"_destroy\",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var o=n[e];if(this.nsps[o].active)return void g(\"socket %s is still active, skipping close\",o)}this._close()}},{key:\"_packet\",value:function(t){g(\"writing packet %j\",t);for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:\"cleanup\",value:function(){g(\"cleanup\"),this.subs.forEach(function(t){return t()}),this.subs.length=0,this.decoder.destroy()}},{key:\"_close\",value:function(){g(\"disconnect\"),this.skipReconnect=!0,this._reconnecting=!1,\"opening\"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState=\"closed\",this.engine&&this.engine.close()}},{key:\"disconnect\",value:function(){return this._close()}},{key:\"onclose\",value:function(t){g(\"onclose\"),this.cleanup(),this.backoff.reset(),this._readyState=\"closed\",c(y(r.prototype),\"emit\",this).call(this,\"close\",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:\"reconnect\",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)g(\"reconnect failed\"),this.backoff.reset(),c(y(r.prototype),\"emit\",this).call(this,\"reconnect_failed\"),this._reconnecting=!1;else{var n=this.backoff.duration();g(\"will wait %dms before reconnect attempt\",n),this._reconnecting=!0;var o=setTimeout(function(){e.skipReconnect||(g(\"attempting reconnect\"),c(y(r.prototype),\"emit\",t).call(t,\"reconnect_attempt\",e.backoff.attempts),e.skipReconnect||e.open(function(n){n?(g(\"reconnect attempt error\"),e._reconnecting=!1,e.reconnect(),c(y(r.prototype),\"emit\",t).call(t,\"reconnect_error\",n)):(g(\"reconnect success\"),e.onreconnect())}))},n);this.subs.push(function(){clearTimeout(o)})}}},{key:\"onreconnect\",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),c(y(r.prototype),\"emit\",this).call(this,\"reconnect\",t)}}]),r}();exports.Manager=w;"},"sourceMaps":null,"error":null,"hash":"642812415e05a5edc2e2dae46d9baef8","cacheData":{"env":{}}}