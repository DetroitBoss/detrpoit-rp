{"id":"uq5A","dependencies":[{"name":"C:\\onyx_V2\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":18,"index":18},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\node_modules\\react\\index.js"},{"name":"./assets/fuel.less","loc":{"line":2,"column":7,"index":35},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\assets\\fuel.less"},{"name":"./assets/bg.svg","loc":{"line":3,"column":15,"index":73},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\assets\\bg.svg"},{"name":"./assets/bge.svg","loc":{"line":4,"column":16,"index":109},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\assets\\bge.svg"},{"name":"./assets/filling.png","loc":{"line":5,"column":20,"index":150},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\assets\\filling.png"},{"name":"@material-ui/core","loc":{"line":6,"column":49,"index":224},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\node_modules\\@material-ui\\core\\esm\\index.js"},{"name":"../PayBox/PayBox","loc":{"line":7,"column":23,"index":269},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\PayBox\\PayBox.tsx"},{"name":"../../modules/custom.event","loc":{"line":8,"column":28,"index":318},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../modules/CEF","loc":{"line":9,"column":20,"index":369},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts"},{"name":"../../../shared/vehicles","loc":{"line":10,"column":49,"index":440},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\shared\\vehicles.ts"},{"name":"../../../shared/system","loc":{"line":11,"column":27,"index":496},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Fuel\\Fuel.tsx","resolved":"C:\\onyx_V2\\server\\src\\shared\\system.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Fuel=exports.AddSlider=void 0;var e=s(require(\"react\"));require(\"./assets/fuel.less\");var t=s(require(\"./assets/bg.svg\")),r=s(require(\"./assets/bge.svg\")),l=s(require(\"./assets/filling.png\")),n=require(\"@material-ui/core\"),a=require(\"../PayBox/PayBox\"),i=require(\"../../modules/custom.event\"),u=require(\"../../modules/CEF\"),o=require(\"../../../shared/vehicles\"),c=require(\"../../../shared/system\");function s(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,l)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function E(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(e,b(l.key),l)}}function y(e,t,r){return t&&E(e.prototype,t),r&&E(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function b(e){var t=v(e,\"string\");return\"symbol\"===f(t)?t:String(t)}function v(e,t){if(\"object\"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var l=r.call(e,t||\"default\");if(\"object\"!==f(l))return l;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function g(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=w();return function(){var r,l=O(e);if(t){var n=O(this).constructor;r=Reflect.construct(l,arguments,n)}else r=l.apply(this,arguments);return F(this,r)}}function F(e,t){if(t&&(\"object\"===f(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return C(e)}function C(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function w(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=exports.Fuel=function(n){g(f,e.default.Component);var s=P(f);function f(t){var r;return h(this,f),(r=s.call(this,t)).clickPay=function(){var e=r._child.current.canPay(r.state.fuelPrice[r.state.fuelSelectType]*r.state.fuelFilling);e&&i.CustomEvent.callServer(\"fuel:add\",r.state.id,r.state.fuelFilling,e.paytype,e.pin,r.isEletro(),r.state.fuelTypes[r.state.fuelSelectType]).then(function(e){e?r._child.current.getError(e):u.CEF.gui.setGui(null)})},r.setFuel=function(e){if((e=Math.floor(e))<r.state.fuelMin)return 1;r.setState(m(m({},r.state),{},{fuelFilling:e-r.state.fuelMin}))},r.isEletro=function(){return r.state.fuelTypes[0]==o.VEHICLE_FUEL_TYPE.ELECTRO},r.state={id:0,show:u.CEF.test,fuelName:\"GASOLINE\",fuelTypes:u.CEF.test?[o.VEHICLE_FUEL_TYPE.ELECTRO,o.VEHICLE_FUEL_TYPE.A95,o.VEHICLE_FUEL_TYPE.A92,o.VEHICLE_FUEL_TYPE.DISEL]:[],fuelPrice:[10,11,12,13],fuelFilling:10,fuelCost:10,canisterPrice:0,fuelMin:25,fuelMax:100,fuelSelectType:0,fuelSelectPay:0},r.ev=i.CustomEvent.register(\"fuel:open\",function(e,t,l,n,a,i){var u=t.filter(function(t){return!(!e||t.item!==o.VEHICLE_FUEL_TYPE.ELECTRO)||!e&&t.item!==o.VEHICLE_FUEL_TYPE.ELECTRO});r.setState({catalog:t,show:!0,fuelName:n,fuelTypes:u.map(function(e){return e.item}),fuelPrice:u.map(function(e){return e.price}),fuelMin:Math.min(Math.floor(a),i),fuelFilling:Math.min(Math.floor(a),i),fuelMax:i,id:l},function(){r.setFuel(Math.min(Math.floor(a),i))})}),r._child=e.default.createRef(),r}return y(f,[{key:\"render\",value:function(){var n=this;return this.state.show?e.default.createElement(\"div\",{className:\"fuel_browser\"},e.default.createElement(\"div\",{className:\"fuel_blur\"}),e.default.createElement(\"div\",{className:\"fuel_grid\"}),e.default.createElement(\"div\",{className:\"fuel_main\"},e.default.createElement(\"div\",{className:\"fuel_s_left\"},T(this.isEletro(),this.state.fuelFilling+this.state.fuelMin,this.state.fuelPrice[this.state.fuelSelectType]*this.state.fuelFilling,1,0,this.state.fuelMax,this.setFuel),e.default.createElement(\"div\",{className:\"fuel_left\"},e.default.createElement(\"div\",{className:\"fuel_water \".concat(this.isEletro()?\"fuel_electro\":\"\"),style:{top:\"\".concat(this.state.fuelMax-(this.state.fuelFilling+this.state.fuelMin),\"%\")}}),e.default.createElement(\"div\",{className:\"fuel_water \".concat(this.isEletro()?\"fuel_electro\":\"\"),style:{top:\"\".concat(this.state.fuelMax-this.state.fuelMin,\"%\")}}))),e.default.createElement(\"div\",{className:\"fuel_center\"},e.default.createElement(\"div\",{className:\"fuel_name\"},e.default.createElement(\"h1\",null,\"Заправка\"),e.default.createElement(\"h2\",null,this.state.fuelName)),this.isEletro()?null:e.default.createElement(e.default.Fragment,null,e.default.createElement(\"p\",null,\"Выберите топливо\"),e.default.createElement(\"div\",{className:\"fuel_type\"},this.state.fuelTypes.map(function(t,r){return e.default.createElement(\"div\",{key:r,className:\"fuel_key_type \".concat(n.state.fuelSelectType==r?\"fuel_type_select\":\"\"),onClick:function(){return n.setState(m(m({},n.state),{},{fuelSelectType:r,fuelCost:n.state.catalog.find(function(e){return e.item===t}).price}))}},o.fuelTypeNames[t])}))),e.default.createElement(\"div\",{className:\"fuel_pay_info\"},e.default.createElement(\"h3\",{className:this.isEletro()?\"fuel_electro\":\"\"},\"$\",c.systemUtil.numberFormat(this.state.fuelPrice[this.state.fuelSelectType]*this.state.fuelFilling)),e.default.createElement(\"h3\",null,\"$\",c.systemUtil.numberFormat(this.state.fuelPrice[this.state.fuelSelectType])),e.default.createElement(\"h3\",null,this.state.fuelFilling.toFixed(2),\" \",this.isEletro()?\"кВт\":\"L\"),e.default.createElement(\"p\",null,\"Стоимость\"),e.default.createElement(\"p\",null,this.isEletro()?\"Цена за кВт\":\"Цена за литр\"),e.default.createElement(\"p\",null,\"Количество\")),e.default.createElement(a.PayBox,{ref:this._child,allowCompany:!0}),e.default.createElement(\"div\",{onClick:this.clickPay,className:\"fuel_pay \".concat(this.isEletro()?\"fuel_electro\":\"\")},this.isEletro()?\"Подключить зарядное устройство\":\"Заправить\")),!this.isEletro()&&this.state.canisterPrice?e.default.createElement(\"div\",{className:\"fuel_right\"},e.default.createElement(\"div\",null,e.default.createElement(\"h1\",null,\"Купить\"),e.default.createElement(\"h2\",null,\"Канистру\"),e.default.createElement(\"h3\",null,\"$\",this.state.canisterPrice)),e.default.createElement(\"img\",{src:l.default})):null),e.default.createElement(\"div\",{className:\"fuel_bg\"},e.default.createElement(\"img\",{src:this.isEletro()?r.default:t.default}))):null}}]),f}(),x=function(t,r,l){return e.default.createElement(\"div\",{className:\"fuel_slider\"},e.default.createElement(\"h1\",null,t,l?\"кВт\":\"L\"),e.default.createElement(\"h2\",null,\"/$\",c.systemUtil.numberFormat(r)))},T=exports.AddSlider=function(t,r,l,n,a,i,u){return t?e.default.createElement(N,{valueLabelFormat:function(){return x(r,l,t)},orientation:\"vertical\",valueLabelDisplay:\"on\",value:r,step:n||.01,min:a,max:i,onChange:function(e,t){return u(t)}}):e.default.createElement(M,{valueLabelFormat:function(){return x(r,l,t)},orientation:\"vertical\",valueLabelDisplay:\"on\",value:r,step:n||.01,min:a,max:i,onChange:function(e,t){return u(t)}})},L=(0,n.createStyles)({root:{color:\"#52af77\",height:16,\"&$vertical\":{width:8}},thumb:{height:10,width:30,borderRadius:4,backgroundColor:\"#6FCF97\",marginTop:-8,\"&:focus, &:hover, &$active\":{boxShadow:\"0px 0px 30px #6FCF97\"}},active:{},valueLabel:{left:0,top:0,width:20,color:\"#00000000\"},track:{height:16,borderRadius:4,boxShadow:\"0px 0px 30px #6FCF97\"},rail:{backgroundColor:\"rgba(255, 255, 255, 0.1);\",height:16,borderRadius:4},vertical:{\"& $rail\":{width:8},\"& $track\":{width:8},\"& $thumb\":{marginLeft:-11}}}),j=m(m({},L),{},{root:m(m({},L.root),{},{color:\"#56CCF2\"}),thumb:m(m({},L.thumb),{},{backgroundColor:\"#56CCF2\",\"&:focus, &:hover, &$active\":{boxShadow:\"0px 0px 30px #56CCF2\"}}),track:m(m({},L.track),{},{boxShadow:\"0px 0px 30px #56CCF2\"})}),N=(0,n.withStyles)(j)(n.Slider),M=(0,n.withStyles)(L)(n.Slider);"},"sourceMaps":null,"error":null,"hash":"42086e10076703c1adc3a9293a595b55","cacheData":{"env":{}}}