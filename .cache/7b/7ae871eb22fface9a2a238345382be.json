{"id":"EgTB","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":33,"index":33},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"../../enums/bankPages.enum","loc":{"line":2,"column":26,"index":69},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\enums\\bankPages.enum.ts"},{"name":"../../enums/transactionType.enum","loc":{"line":3,"column":32,"index":132},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\enums\\transactionType.enum.ts"},{"name":"./new-transaction-component.less","loc":{"line":4,"column":7,"index":176},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.less"},{"name":"../../../../../../modules/custom.event","loc":{"line":5,"column":28,"index":241},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../../../../../modules/CEF","loc":{"line":6,"column":20,"index":304},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\CEF.ts"},{"name":"../../../../../../modules/system","loc":{"line":7,"column":23,"index":361},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\system.ts"},{"name":"../../../../../../../shared/phone/taxCategory.enum","loc":{"line":8,"column":28,"index":426},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\phone\\taxCategory.enum.ts"},{"name":"../../../../../../../shared/system","loc":{"line":9,"column":27,"index":508},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\new-phone\\components\\bank-page\\components\\new-transaction-component\\new-transaction-component.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\system.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.NewTransactionComponent=void 0;var e=c(require(\"react\")),t=require(\"../../enums/bankPages.enum\"),r=require(\"../../enums/transactionType.enum\");require(\"./new-transaction-component.less\");var n=require(\"../../../../../../modules/custom.event\"),a=require(\"../../../../../../modules/CEF\"),o=require(\"../../../../../../modules/system\"),i=require(\"../../../../../../../shared/phone/taxCategory.enum\"),s=require(\"../../../../../../../shared/system\");function u(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(\"default\"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function l(e){return(l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function h(e){var t=b(e,\"string\");return\"symbol\"===l(t)?t:String(t)}function b(e,t){if(\"object\"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||\"default\");if(\"object\"!==l(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function v(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=O();return function(){var r,n=x(e);if(t){var a=x(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&(\"object\"===l(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return T(e)}function T(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function O(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=exports.NewTransactionComponent=function(u){v(l,e.Component);var c=w(l);function l(t){var r;return C(this,l),(r=c.call(this,t)).cardInputRef=e.default.createRef(),r.amountInputRef=e.default.createRef(),r.state={recipientCard:null,transactionAmount:r.props.taxSum,tax:123456789},n.CustomEvent.register(\"phone:sendMoney:success\",function(){r.props.setNewTransactionAmount(r.state.transactionAmount)}),n.CustomEvent.register(\"phone:payTax:success\",function(){r.props.setNewTransactionAmount(r.props.taxSum)}),r.format=r.format.bind(T(r)),r.formatCardInput=r.formatCardInput.bind(T(r)),r.formatAmountInput=r.formatAmountInput.bind(T(r)),r}return d(l,[{key:\"format\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=e.toString().replace(/[^\\d0-9]/g,\"\"),n=new RegExp(\".{\"+t+\"}\",\"g\");return 3===t?r.substr(0,r.length%t)+\" \"+r.substr(r.length%t,r.length).replace(n,function(e){return e+\" \"}):r.replace(n,function(e){return e+\" \"})}},{key:\"formatCardInput\",value:function(e){this.setState(f(f({},this.state),{},{recipientCard:e.target.value}))}},{key:\"formatAmountInput\",value:function(e){this.setState(f(f({},this.state),{},{transactionAmount:e.target.value}))}},{key:\"render\",value:function(){var u=this;return e.default.createElement(\"div\",{className:\"np-new-transaction\"},e.default.createElement(\"button\",{className:\"np-bank-page-back-btn\",onClick:function(){return u.props.type===r.TransactionType.TAX?u.props.onPageChange(t.BankPages.TAX_CATEGORIES):u.props.onPageChange(t.BankPages.MAIN)}},e.default.createElement(\"div\",{className:\"np-bank-page-btn-icon\"},e.default.createElement(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 16 16\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},e.default.createElement(\"path\",{d:\"M7.625 12.5L3.125 8L7.625 3.5M3.75 8H12.875\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}))),this.props.type===r.TransactionType.TAX&&void 0!==this.props.taxCategory?\"Оплата услуг\":\"Назад\"),e.default.createElement(\"div\",{className:\"np-new-transaction-title\"},this.props.type===r.TransactionType.TRANSFER?\"Перевести средства на другой счет\":this.props.type===r.TransactionType.TAX&&this.props.taxCategory?this.props.taxCategory:null),e.default.createElement(\"div\",{className:\"np-new-transaction-user-balance-wrap\"},\"Ваш баланс\",e.default.createElement(\"div\",{className:\"np-new-transaction-user-balance\"},\"$ \",o.system.numberFormat(a.CEF.user.bank))),this.props.type===r.TransactionType.TRANSFER?e.default.createElement(\"div\",{className:\"np-new-transaction-transfer\"},e.default.createElement(\"label\",{className:\"np-new-transaction-form-field\"},\"Введите карту получателя\",e.default.createElement(\"input\",{className:\"input\",ref:this.cardInputRef,onChange:this.formatCardInput}),e.default.createElement(\"div\",{className:\"input-value\"},this.state.recipientCard)),e.default.createElement(\"label\",{className:\"np-new-transaction-form-field\"},\"Введите сумму перевода\",e.default.createElement(\"input\",{className:\"input\",type:\"number\",onChange:this.formatAmountInput}),e.default.createElement(\"div\",{className:\"input-value\"},this.state.transactionAmount?\"$ \"+this.format(this.state.transactionAmount,3):\"\"))):this.props.type===r.TransactionType.TAX?e.default.createElement(\"div\",{className:\"np-new-transaction-tax\"},e.default.createElement(\"div\",{className:\"np-new-transaction-tax-info\"},\"Налоги\",e.default.createElement(\"div\",{className:\"np-new-transaction-tax-amount\"},\"$ \",o.system.numberFormat(this.props.taxSum))),e.default.createElement(\"div\",{className:\"np-tax-icon\"},this.props.taxCategory===i.TaxCategory.Car?e.default.createElement(\"svg\",{width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},e.default.createElement(\"path\",{d:\"M20.9688 9.625C20.8398 9.41016 19.5675 8.86059 19.5675 8.86059C19.7888 8.74629 19.9401 8.72266 19.9401 8.25C19.9401 7.73438 19.9375 7.5625 19.5938 7.5625H18.4276C18.4229 7.55219 18.4177 7.54145 18.413 7.5307C17.6602 5.88672 17.5592 5.47121 16.4364 4.91176C14.9304 4.16281 12.1069 4.125 11 4.125C9.89312 4.125 7.06965 4.16281 5.56488 4.91176C4.44082 5.47035 4.46875 5.75781 3.58832 7.5307C3.58832 7.53543 3.5793 7.54789 3.57113 7.5625H2.40367C2.0625 7.5625 2.05992 7.73438 2.05992 8.25C2.05992 8.72266 2.21117 8.74629 2.43246 8.86059C2.43246 8.86059 1.20312 9.45312 1.03125 9.625C0.859375 9.79688 0.6875 11 0.6875 13.0625C0.6875 15.125 0.859375 17.1875 0.859375 17.1875H1.37242C1.37242 17.7891 1.46094 17.875 1.71875 17.875H5.15625C5.41406 17.875 5.5 17.7891 5.5 17.1875H16.5C16.5 17.7891 16.5859 17.875 16.8438 17.875H20.3672C20.5391 17.875 20.625 17.7461 20.625 17.1875H21.1406C21.1406 17.1875 21.3125 15.082 21.3125 13.0625C21.3125 11.043 21.0977 9.83984 20.9688 9.625ZM5.38227 11.556C4.59968 11.6416 3.8131 11.6855 3.02586 11.6875C2.14844 11.6875 2.11836 11.7438 2.05648 11.1959C2.03321 10.9452 2.04057 10.6925 2.0784 10.4436L2.10547 10.3125H2.23438C2.75 10.3125 3.23426 10.3344 4.14863 10.6038C4.61369 10.7434 5.05112 10.9623 5.44156 11.2509C5.62891 11.3867 5.67188 11.5156 5.67188 11.5156L5.38227 11.556ZM16.0024 14.6498L15.8125 15.125H6.1875C6.1875 15.125 6.20426 15.0988 5.97266 14.6446C5.80078 14.3086 6.01562 14.0938 6.35551 13.9717C7.01379 13.7345 8.9375 13.0625 11 13.0625C13.0625 13.0625 15.0245 13.6417 15.6621 13.9717C15.8984 14.0938 16.1919 14.1797 16.0024 14.6523V14.6498ZM4.95945 8.78324C4.82066 8.79125 4.68155 8.79225 4.54266 8.78625C4.6548 8.58687 4.71711 8.36473 4.82668 8.1327C5.17043 7.40223 5.56359 6.57551 6.26356 6.22703C7.27504 5.72344 9.37148 5.49656 11 5.49656C12.6285 5.49656 14.725 5.72172 15.7364 6.22703C16.4364 6.57551 16.8279 7.40266 17.1733 8.1327C17.2838 8.36688 17.3452 8.59074 17.4604 8.79141C17.3744 8.79613 17.2756 8.79141 17.0397 8.78324H4.95945ZM19.9005 11.1942C19.8086 11.7305 19.8945 11.6875 18.9741 11.6875C18.1869 11.6855 17.4003 11.6416 16.6177 11.556C16.4953 11.5341 16.4605 11.3274 16.5584 11.2509C16.9469 10.9591 17.3849 10.7399 17.8514 10.6038C18.7657 10.3344 19.2805 10.2983 19.7888 10.3164C19.823 10.3177 19.8554 10.3316 19.8799 10.3554C19.9045 10.3792 19.9193 10.4112 19.9216 10.4453C19.9459 10.6954 19.9388 10.9476 19.9005 11.1959V11.1942Z\",fill:\"white\"})):this.props.taxCategory===i.TaxCategory.Business?e.default.createElement(\"svg\",{width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},e.default.createElement(\"path\",{d:\"M14.4375 12.375H7.5625V11H0.6875V19.4219C0.6875 19.5586 0.741825 19.6898 0.838523 19.7865C0.935222 19.8832 1.06637 19.9375 1.20312 19.9375H20.7969C20.9336 19.9375 21.0648 19.8832 21.1615 19.7865C21.2582 19.6898 21.3125 19.5586 21.3125 19.4219V11H14.4375V12.375ZM21.3125 5.32812C21.3125 5.19137 21.2582 5.06022 21.1615 4.96352C21.0648 4.86682 20.9336 4.8125 20.7969 4.8125H16.5V2.40625C16.5 2.31508 16.4638 2.22765 16.3993 2.16318C16.3349 2.09872 16.2474 2.0625 16.1562 2.0625H5.84375C5.75258 2.0625 5.66515 2.09872 5.60068 2.16318C5.53622 2.22765 5.5 2.31508 5.5 2.40625V4.8125H1.20312C1.06637 4.8125 0.935222 4.86682 0.838523 4.96352C0.741825 5.06022 0.6875 5.19137 0.6875 5.32812V9.625H21.3125V5.32812ZM14.7812 4.8125H7.21875V3.78125H14.7812V4.8125Z\",fill:\"white\"})):this.props.taxCategory===i.TaxCategory.Home?e.default.createElement(\"svg\",{width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},e.default.createElement(\"path\",{d:\"M17.875 7.96661V2.52075H14.4375V5.03227L11 1.83325L0 12.1458H2.75V21.0833H8.9375V14.2083H13.0625V21.0833H19.25V12.1458H22L17.875 7.96661Z\",fill:\"white\"})):this.props.taxCategory===i.TaxCategory.Warehouse?e.default.createElement(\"svg\",{width:\"22\",height:\"22\",viewBox:\"0 0 22 22\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},e.default.createElement(\"path\",{d:\"M19.25 0.6875H2.75L1.375 7.5625V13.75H20.625V7.5625L19.25 0.6875ZM18.7344 7.5625H13.75C13.75 8.29185 13.4603 8.99132 12.9445 9.50704C12.4288 10.0228 11.7293 10.3125 11 10.3125C10.2707 10.3125 9.57118 10.0228 9.05546 9.50704C8.53973 8.99132 8.25 8.29185 8.25 7.5625H3.26562L4.21094 2.49219H17.7891L18.7344 7.5625ZM13.75 15.125C13.75 15.8543 13.4603 16.5538 12.9445 17.0695C12.4288 17.5853 11.7293 17.875 11 17.875C10.2707 17.875 9.57118 17.5853 9.05546 17.0695C8.53973 16.5538 8.25 15.8543 8.25 15.125H1.375V21.3125H20.625V15.125H13.75Z\",fill:\"white\"})):null)):null,e.default.createElement(\"button\",{className:\"np-new-transaction-confirm\",onClick:function(){if(u.props.type===r.TransactionType.TRANSFER){if(!u.state.recipientCard)return a.CEF.alert.setAlert(\"error\",\"Для перевода средств необходимо указать корректный счёт получателя\");if(u.state.transactionAmount<100||u.state.transactionAmount>1e5)return a.CEF.alert.setAlert(\"error\",\"Для перевода средств укажите сумму от 100$ до 100000$\");if(a.CEF.user.bank<u.state.transactionAmount)return a.CEF.alert.setAlert(\"error\",\"На вашем счету недостаточно средств\");n.CustomEvent.triggerServer(\"phone:sendMoney\",u.state.recipientCard,s.systemUtil.parseInt(u.state.transactionAmount))}else if(u.props.type===r.TransactionType.TAX){if(!u.state.transactionAmount)return a.CEF.alert.setAlert(\"error\",\"Неверная сумма\");if(u.state.transactionAmount>u.props.taxSum)return a.CEF.alert.setAlert(\"error\",\"Сумма превышает максимальную\");u.props.setNewTransactionAmount(u.state.tax),n.CustomEvent.triggerServer(\"phone:payTax\",u.props.taxCategory,u.props.taxSum)}}},this.props.type===r.TransactionType.TRANSFER?\"Перевести\":\"Оплатить\"))}}]),l}();"},"sourceMaps":null,"error":null,"hash":"b6a1a0de00fe09e41f13bc3dffcb6b57","cacheData":{"env":{}}}