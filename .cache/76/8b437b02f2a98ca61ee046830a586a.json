{"id":"SMzq","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":10,"column":33,"index":791},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"./style.less","loc":{"line":11,"column":7,"index":808},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\style.less"},{"name":"./assets/*.png","loc":{"line":12,"column":16,"index":841},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\assets\\*.png"},{"name":"./assets/*.svg","loc":{"line":13,"column":16,"index":876},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\assets\\*.svg"},{"name":"../CloseButton","loc":{"line":14,"column":28,"index":923},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\CloseButton\\index.ts"},{"name":"../../modules/custom.event","loc":{"line":15,"column":28,"index":970},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../modules/CEF","loc":{"line":16,"column":20,"index":1021},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\CEF.ts"},{"name":"classnames","loc":{"line":17,"column":23,"index":1066},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\classnames\\index.js"},{"name":"mobx-react","loc":{"line":18,"column":25,"index":1106},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\mobx-react\\dist\\mobxreact.esm.js"},{"name":"../../../shared/houses/menu/interiors.config","loc":{"line":19,"column":43,"index":1164},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\houses\\menu\\interiors.config.ts"},{"name":"../../../shared/houses/furniture/furniture.config","loc":{"line":20,"column":30,"index":1243},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\InteriorControl\\InteriorControl.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\houses\\furniture\\furniture.config.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.InteriorControl=void 0;var e=m(require(\"react\"));require(\"./style.less\");var t=s(require(\"./assets/*.png\")),r=s(require(\"./assets/*.svg\")),n=require(\"../CloseButton\"),a=require(\"../../modules/custom.event\"),o=require(\"../../modules/CEF\"),i=s(require(\"classnames\")),l=require(\"mobx-react\"),u=require(\"../../../shared/houses/menu/interiors.config\"),c=require(\"../../../shared/houses/furniture/furniture.config\");function s(e){return e&&e.__esModule?e:{default:e}}function f(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(\"default\"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function d(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function v(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function h(e){var t=y(e,\"string\");return\"symbol\"==I(t)?t:t+\"\"}function y(e,t){if(\"object\"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||\"default\");if(\"object\"!=I(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function p(e,t,r){return t=_(t),C(e,b()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function C(e,t){if(t&&(\"object\"==I(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return E(e)}function E(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var S=function(e,t,r,n){var a,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if(\"object\"===(\"undefined\"==typeof Reflect?\"undefined\":I(Reflect))&&\"function\"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},D=function(e,t){if(\"object\"===(\"undefined\"==typeof Reflect?\"undefined\":I(Reflect))&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},P=exports.InteriorControl=function(l){function s(e){var t;return d(this,s),(t=p(this,s,[e])).close=function(){o.CEF.gui.setGui(null)},t.changePage=function(e){t.store.setState({page:e})},t.changeLayout=function(e){t.store.setState({layout:e,variation:null})},t.changeVariation=function(e){t.store.setState({variation:e})},t.state={currentLayout:null,layoutState:0,personalLayout:0},t.store=t.props.store,t}return k(s,e.Component),v(s,[{key:\"changeFurnitureCategory\",value:function(e){this.store.setState({category:e})}},{key:\"changeFurnitureItem\",value:function(e){this.store.setState({furnitureItem:e})}},{key:\"getCategories\",value:function(){var e=[];return this.store.furniture.forEach(function(t){var r=c.furnitureList.find(function(e){return e.id===t.cfgId});r&&void 0===e.find(function(e){return e===r.cat})&&e.push(r.cat)}),e}},{key:\"getFurnitureByCategory\",value:function(){var e=this;return this.store.furniture.filter(function(t){var r=c.furnitureList.find(function(e){return t.cfgId===e.id});return!!r&&r.cat===e.store.category})}},{key:\"currentFurnitureItemPlaced\",value:function(){var e=this,t=this.store.furniture.find(function(t){return t.id===e.store.furnitureItem});return!!t&&t.placed}},{key:\"getSellFurnitureAmount\",value:function(){var e=this,t=this.store.furniture.find(function(t){return t.id===e.store.furnitureItem});if(!t)return 0;var r=c.furnitureList.find(function(e){return t.cfgId===e.id});return r?.2*r.cost:0}},{key:\"getVariationCost\",value:function(){var e=this,t=u.interiorsData.find(function(t){return t.id===e.store.variation});return t?t.cost:0}},{key:\"variationIsDonate\",value:function(){var e=this,t=u.interiorsData.find(function(t){return t.id===e.store.variation});return!!t&&t.isDonate}},{key:\"getCurrentInteriorData\",value:function(){var e=this;if(null===this.store.interiorId)return null;var t=u.interiorsData.find(function(t){return t.interiorId===e.store.interiorId});if(!t)return null;var r=u.layoutsData.find(function(e){return e.id===t.layoutId});return r?{name:t.name,cost:t.cost,isDonate:t.isDonate,image:t.img,layoutName:r.name,layoutImage:this.getPersonalLayoutImage(r)}:null}},{key:\"getPersonalLayoutImage\",value:function(e){return\"string\"==typeof e.img?e.img:e.img[this.state.personalLayout]}},{key:\"changePersonalLayoutImage\",value:function(){var e=this,t=u.interiorsData.find(function(t){return t.interiorId===e.store.interiorId});if(t){var r=u.layoutsData.find(function(e){return e.id===t.layoutId});r&&\"string\"!=typeof r.img&&(r.img.length-1===this.state.personalLayout?this.setState({personalLayout:0}):this.setState({personalLayout:this.state.personalLayout+1}))}}},{key:\"buyInterior\",value:function(){var e=this,t=u.interiorsData.find(function(t){return t.id===e.store.variation});t&&(a.CustomEvent.triggerServer(\"homeMenu:buyInterior\",t.interiorId),this.close())}},{key:\"sellFurniture\",value:function(){var e=this.store.furnitureItem;a.CustomEvent.triggerServer(\"furniture:sell\",e),this.store.setState({furnitureItem:null})}},{key:\"placeFurniture\",value:function(e){var t=this.store.furnitureItem;a.CustomEvent.triggerServer(\"furniture:placement\",t,e)}},{key:\"getConfiguratorImage\",value:function(){var e=this,t=u.interiorsData.find(function(t){return t.id===e.store.variation});return t?t.img:\"\"}},{key:\"componentWillUnmount\",value:function(){this.store.setState({layout:null,variation:null,category:null,furnitureItem:null})}},{key:\"getImageForShopLayout\",value:function(e){return\"string\"==typeof e.img?e.img:this.state.layoutState===e.id?e.img[this.state.currentLayout]:e.img[0]}},{key:\"changeImageForShopLayout\",value:function(e){\"string\"!=typeof e.img&&(this.state.layoutState!==e.id?this.setState({layoutState:e.id,currentLayout:1}):this.setState({layoutState:e.id,currentLayout:this.state.currentLayout===e.img.length-1?0:this.state.currentLayout+1}))}},{key:\"render\",value:function(){var a=this;return e.default.createElement(\"div\",{className:\"interiorControl\"},e.default.createElement(n.CloseButton,{onClickAction:this.close}),e.default.createElement(\"div\",{className:\"interiorControl-left\"},e.default.createElement(\"div\",{className:\"interiorControl-left-head\"},e.default.createElement(\"h1\",null,\"Управление интерьером\"),e.default.createElement(\"span\",null,\"Создай свой кастомный дизайн дома! Выбери план и интерьер дома, а потом добавь любимую мебель.\"),e.default.createElement(\"div\",{className:\"interiorControl-left-head-navigation\"},e.default.createElement(\"div\",{onClick:function(){return a.changePage(\"configurator\")},className:(0,i.default)({\"interiorControl-left-head-navigation-active\":\"configurator\"===this.store.page})},\"Конфигуратор\"),e.default.createElement(\"div\",{onClick:function(){return a.changePage(\"interior\")},className:(0,i.default)({\"interiorControl-left-head-navigation-active\":\"interior\"===this.store.page})},\"Мой интерьер\"),e.default.createElement(\"div\",{onClick:function(){return a.changePage(\"furniture\")},className:(0,i.default)({\"interiorControl-left-head-navigation-active\":\"furniture\"===this.store.page})},\"Моя мебель\"))),\"configurator\"===this.store.page&&e.default.createElement(\"div\",{className:\"interiorControl-left-configurator\"},e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-title\"},e.default.createElement(\"h1\",null,\"1 шаг\"),e.default.createElement(\"span\",null,\"Выберите план дома\")),u.layoutsData.map(function(t,n){return e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block\",key:n},e.default.createElement(\"img\",{src:r.default[a.getImageForShopLayout(t)],className:\"interiorControl-left-configurator-block__image\",alt:\"\",onClick:function(){return a.changeImageForShopLayout(t)}}),e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block__name\"},e.default.createElement(\"h1\",null,\"Название\"),e.default.createElement(\"span\",null,t.name)),\"string\"!=typeof t.img&&e.default.createElement(\"span\",{className:\"interiorControl-left-configurator-block__description\"},\"Нажмите на изображение, чтобы просмотреть остальные этажи\"),e.default.createElement(\"div\",{className:(0,i.default)(\"interiorControl-left-configurator-block__switcher\",{\"interiorControl-left-configurator-block__switcher-active\":a.store.layout===t.id}),onClick:function(){return a.changeLayout(t.id)}},e.default.createElement(\"div\",null)))}),null!==this.store.layout&&e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-title\"},e.default.createElement(\"h1\",null,\"2 шаг\"),e.default.createElement(\"span\",null,\"Выберите интерьер\")),u.interiorsData.filter(function(e){return e.layoutId===a.store.layout}).map(function(n,o){return e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block\",key:o},e.default.createElement(\"img\",{src:t.default[n.img],className:\"interiorControl-left-configurator-block__image\",alt:\"\"}),e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block__name\"},e.default.createElement(\"h1\",null,\"Название\"),e.default.createElement(\"span\",null,n.name)),e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block__price\"},e.default.createElement(\"h1\",null,\"Цена\"),e.default.createElement(\"span\",null,n.isDonate?e.default.createElement(\"img\",{src:r.default.coinIcon,alt:\"\"}):\"$\",\" \",n.cost)),e.default.createElement(\"div\",{className:(0,i.default)(\"interiorControl-left-configurator-block__switcher\",{\"interiorControl-left-configurator-block__switcher-active\":a.store.variation===n.id}),onClick:function(){return a.changeVariation(n.id)}},e.default.createElement(\"div\",null)))}))),\"interior\"===this.store.page&&e.default.createElement(\"div\",{className:\"interiorControl-left-configurator interiorControl-left-margin\"},null!==this.getCurrentInteriorData()&&e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block\"},e.default.createElement(\"img\",{src:r.default[this.getCurrentInteriorData().layoutImage],className:\"interiorControl-left-configurator-block__image\",alt:\"\",onClick:function(){return a.changePersonalLayoutImage()}}),e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block__name\"},e.default.createElement(\"h1\",null,\"Название\"),e.default.createElement(\"span\",null,this.getCurrentInteriorData().layoutName))),null!==this.getCurrentInteriorData()&&e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block\"},e.default.createElement(\"img\",{src:t.default[this.getCurrentInteriorData().image],className:\"interiorControl-left-configurator-block__image\",alt:\"\"}),e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block__name\"},e.default.createElement(\"h1\",null,\"Название\"),e.default.createElement(\"span\",null,this.getCurrentInteriorData().name)),e.default.createElement(\"div\",{className:\"interiorControl-left-configurator-block__price\"},e.default.createElement(\"h1\",null,\"Цена\"),e.default.createElement(\"span\",null,this.getCurrentInteriorData().isDonate?e.default.createElement(\"img\",{src:r.default.coinIcon,alt:\"\"}):\"$\",\" \",this.getCurrentInteriorData().cost)))),\"furniture\"===this.store.page&&e.default.createElement(\"div\",{className:\"interiorControl-left-furniture\"},e.default.createElement(\"div\",{className:\"interiorControl-left-furniture-categories\"},this.getCategories().map(function(t,n){return e.default.createElement(\"div\",{className:(0,i.default)({\"interiorControl-left-furniture-categories-active\":t===a.store.category}),key:n,onClick:function(){return a.changeFurnitureCategory(t)}},e.default.createElement(\"img\",{src:r.default[t],alt:\"\"}))})),null!==this.store.category&&e.default.createElement(\"div\",{className:\"interiorControl-left-furniture-list\"},this.getFurnitureByCategory().map(function(t,r){var n=c.furnitureList.find(function(e){return e.id===t.cfgId});return n?e.default.createElement(\"div\",{className:\"interiorControl-left-furniture-list-block\",key:r,onClick:function(){return a.changeFurnitureItem(t.id)}},e.default.createElement(\"div\",{className:\"interiorControl-left-furniture-list-block__name\"},n.name),e.default.createElement(\"div\",{className:\"interiorControl-left-furniture-list-block__price\"},n.cost,\" $\")):null})))),\"configurator\"===this.store.page&&null!==this.store.variation&&e.default.createElement(\"div\",{className:\"interiorControl-center\"},e.default.createElement(\"div\",{className:\"interiorControl-center-block\"},e.default.createElement(\"img\",{src:r.default.ellipse,alt:\"\",className:\"interiorControl-center-block__background\"}),e.default.createElement(\"img\",{src:t.default[this.getConfiguratorImage()],alt:\"\",className:\"interiorControl-center-block__image\"})),e.default.createElement(\"div\",{className:\"interiorControl-center-eye\"},e.default.createElement(\"img\",{src:r.default.eye,alt:\"\"}))),\"interior\"===this.store.page&&null!==this.getCurrentInteriorData()&&e.default.createElement(\"div\",{className:\"interiorControl-center\"},e.default.createElement(\"div\",{className:\"interiorControl-center-block\"},e.default.createElement(\"img\",{src:r.default.ellipse,alt:\"\",className:\"interiorControl-center-block__background\"}),e.default.createElement(\"img\",{src:t.default[this.getCurrentInteriorData().image],alt:\"\",className:\"interiorControl-center-block__image\"})),e.default.createElement(\"div\",{className:\"interiorControl-center-eye\"},e.default.createElement(\"img\",{src:r.default.eye,alt:\"\"}))),\"furniture\"===this.store.page&&null!==this.store.furnitureItem&&e.default.createElement(\"div\",{className:\"interiorControl-center\"},this.currentFurnitureItemPlaced()&&e.default.createElement(\"div\",{className:\"interiorControl-center__button interiorControl-buttonTransparent\",onClick:function(){return a.placeFurniture(!1)}},e.default.createElement(\"img\",{src:r.default.cross,alt:\"\"}),e.default.createElement(\"span\",null,\"Убрать\")),!this.currentFurnitureItemPlaced()&&e.default.createElement(\"div\",{className:\"interiorControl-center__button\",onClick:function(){return a.placeFurniture(!0)}},e.default.createElement(\"img\",{src:r.default.mark,alt:\"\"}),e.default.createElement(\"span\",null,\"Поставить\"))),e.default.createElement(\"div\",{className:\"interiorControl-rightTop\"},e.default.createElement(\"div\",{className:\"interiorControl-rightTop__cash\"},\"$ \",this.store.cash),e.default.createElement(\"div\",{className:\"interiorControl-rightTop__bank\"},\"$ \",this.store.wallet),e.default.createElement(\"div\",{className:\"interiorControl-rightTop__coins\"},e.default.createElement(\"img\",{src:r.default.coinIcon,alt:\"\"}),e.default.createElement(\"span\",null,this.store.coins))),\"configurator\"===this.store.page&&null!==this.store.variation&&e.default.createElement(\"div\",{className:\"interiorControl-rightBottom\"},e.default.createElement(\"div\",{className:\"interiorControl-rightBottom__title\"},\"Итог\"),e.default.createElement(\"div\",{className:\"interiorControl-rightBottom__price\"},this.variationIsDonate()?e.default.createElement(\"img\",{src:r.default.coinIcon,alt:\"\"}):\"$\",\" \",\" \",this.getVariationCost()),e.default.createElement(\"div\",{className:\"interiorControl-rightBottom__button\",onClick:function(){return a.buyInterior()}},e.default.createElement(\"img\",{src:r.default.mark,alt:\"\"}),e.default.createElement(\"span\",null,\"Купить\"))),\"furniture\"===this.store.page&&null!==this.store.furnitureItem&&e.default.createElement(\"div\",{className:\"interiorControl-rightBottom\"},e.default.createElement(\"div\",{className:\"interiorControl-rightBottom__percent\"},\"-80%\"),e.default.createElement(\"div\",{className:\"interiorControl-rightBottom__title\"},\"Итог\"),e.default.createElement(\"div\",{className:\"interiorControl-rightBottom__price\"},this.getSellFurnitureAmount(),\"$\"),e.default.createElement(\"div\",{className:\"interiorControl-rightBottom__button interiorControl-buttonTransparent\",onClick:function(){return a.sellFurniture()}},e.default.createElement(\"span\",null,\"Продать\"))))}}])}();exports.InteriorControl=P=S([l.observer,D(\"design:paramtypes\",[Object])],P);"},"sourceMaps":null,"error":null,"hash":"6948c1da843df7f71f6d76936ba33b3c","cacheData":{"env":{}}}