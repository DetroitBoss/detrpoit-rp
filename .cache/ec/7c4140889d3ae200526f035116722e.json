{"id":"hh04","dependencies":[{"name":"C:\\onyx_V2\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":33,"index":33},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\node_modules\\react\\index.js"},{"name":"./style.less","loc":{"line":2,"column":7,"index":50},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\style.less"},{"name":"./assets/*.png","loc":{"line":3,"column":16,"index":83},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\assets\\*.png"},{"name":"./assets/*.svg","loc":{"line":4,"column":16,"index":118},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\assets\\*.svg"},{"name":"../../../../../shared/jobs","loc":{"line":5,"column":42,"index":179},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\src\\shared\\jobs.ts"},{"name":"../../../../modules/custom.event","loc":{"line":6,"column":28,"index":238},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../../../../shared/system","loc":{"line":7,"column":27,"index":302},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\src\\shared\\system.ts"},{"name":"../../../../modules/CEF","loc":{"line":8,"column":20,"index":355},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\UserMenu\\components\\Statistic\\Statistic.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Statistic=void 0;var e=o(require(\"react\"));require(\"./style.less\");var t=s(require(\"./assets/*.png\")),a=s(require(\"./assets/*.svg\")),l=require(\"../../../../../shared/jobs\"),r=require(\"../../../../modules/custom.event\"),n=require(\"../../../../../shared/system\"),i=require(\"../../../../modules/CEF\");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var l={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(\"default\"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var i=r?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(l,n,i):l[n]=e[n]}return l.default=e,a&&a.set(e,l),l}function u(e){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach(function(t){d(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e,t,a){return(t=b(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function v(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,\"value\"in l&&(l.writable=!0),Object.defineProperty(e,b(l.key),l)}}function y(e,t,a){return t&&v(e.prototype,t),a&&v(e,a),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function b(e){var t=E(e,\"string\");return\"symbol\"===u(t)?t:String(t)}function E(e,t){if(\"object\"!==u(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||\"default\");if(\"object\"!==u(l))return l;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function h(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=j();return function(){var a,l=w(e);if(t){var r=w(this).constructor;a=Reflect.construct(l,arguments,r)}else a=l.apply(this,arguments);return N(this,a)}}function N(e,t){if(t&&(\"object\"===u(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return O(e)}function O(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function j(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=exports.Statistic=function(s){h(o,e.Component);var c=g(o);function o(e){var t;return p(this,o),(t=c.call(this,e)).state={username:\"User Name\",kills:100,death:50,regDate:\"20 января 1998\",playTimeTotal:200,playTimeMouth:50,playTimeToday:12,moneyTotal:2e8,moneyMouth:5e4,moneyToday:1e3,moneySpent:3e8,jobs:[{img:\"fish\",title:\"Рыбалка\",lvl:2,maxLvl:5,exp:5e3,maxExp:1e4},{img:\"fish\",title:\"Электрик\",lvl:1,maxLvl:5,exp:4500,maxExp:1e4}],page:0},t}return y(o,[{key:\"componentDidMount\",value:function(){var e=this;r.CustomEvent.callServer(\"userStats:get\").then(function(t){var a,r,s,c,o,u,m,f,d,p;console.log(JSON.stringify(t));var v=[];for(var y in t.workStats){var b=(0,l.getJobData)(y);if(b){var E=t.workStats[y];v.push({img:b.name,exp:E,lvl:(0,l.getLevelByExp)(E),maxLvl:5,maxExp:1e3,title:b.name})}}e.setState({death:null!==(a=null===(r=t.userStats)||void 0===r?void 0:r.totalDeaths)&&void 0!==a?a:0,kills:null!==(s=null===(c=t.userStats)||void 0===c?void 0:c.totalKills)&&void 0!==s?s:0,moneyMouth:t.monthlyMoneyEarned,moneyToday:t.dailyMoneyEarned,moneySpent:null!==(o=null===(u=t.userStats)||void 0===u?void 0:u.totalMoneySpend)&&void 0!==o?o:0,moneyTotal:null!==(m=null===(f=t.userStats)||void 0===f?void 0:f.totalMoneyEarned)&&void 0!==m?m:0,playTimeToday:t.dailyOnline,playTimeMouth:t.monthlyOnline,playTimeTotal:null!==(d=null===(p=t.userStats)||void 0===p?void 0:p.totalPlayedTime)&&void 0!==d?d:0,regDate:n.systemUtil.timeStampString(t.regDate,!0),username:i.CEF.user.name,jobs:v})})}},{key:\"kd\",value:function(){return 0==this.state.death?0:(this.state.kills/this.state.death).toFixed(2)}},{key:\"moneyPrettify\",value:function(e){return e.toString().replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g,\"$1 \")}},{key:\"maxPage\",get:function(){var e=this.state.jobs.length/4;return e<1?0:Number.isInteger(e)?e-1:Number(e.toFixed(0))}},{key:\"setPage\",value:function(e){var t=this.state.page;!0===e&&this.state.page===this.maxPage||!1===e&&0===this.state.page||this.setState(f(f({},this.state),{},{page:e?t+1:t-1}))}},{key:\"preRenderCheck\",value:function(e){e+=1;var t=4*this.state.page;return e>t&&e<t+5}},{key:\"render\",value:function(){var l=this;return e.default.createElement(\"div\",{className:\"statistic\"},e.default.createElement(\"div\",{className:\"statistic__title\"},\"Статистика\"),e.default.createElement(\"div\",{className:\"statistic-row\"},e.default.createElement(\"div\",{className:\"statistic__username\"},this.state.username),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Кол-во убийств\"),e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:a.default.knives,alt:\"\"}),this.state.kills)),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Кол-во смертей\"),e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:a.default.skull,alt:\"\"}),this.state.death)),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Убийства/Смерти\"),e.default.createElement(\"div\",null,this.kd()))),e.default.createElement(\"div\",{className:\"statistic-row statistic-information\"},e.default.createElement(\"img\",{src:a.default.watch,className:\"statistic-information__img\",alt:\"\"}),e.default.createElement(\"div\",{className:\"statistic-block\"},e.default.createElement(\"div\",{className:\"statistic-block__title\"},\"Дата регистрации\"),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"div\",null,this.state.regDate)),e.default.createElement(\"div\",{className:\"statistic-block__title\"},\"Время в игре\"),e.default.createElement(\"div\",{className:\"statistic-row\"},e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Всего\"),e.default.createElement(\"div\",null,this.state.playTimeTotal,\"ч\")),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"В этом месяце\"),e.default.createElement(\"div\",null,this.state.playTimeMouth,\"ч\")),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Сегодня\"),e.default.createElement(\"div\",null,this.state.playTimeToday,\"ч\")))),e.default.createElement(\"img\",{src:a.default.coin,className:\"statistic-information__img\",alt:\"\"}),e.default.createElement(\"div\",{className:\"statistic-block\"},e.default.createElement(\"div\",{className:\"statistic-block__title\"},\"Потрачено\"),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"div\",null,this.moneyPrettify(this.state.moneySpent),\"$\")),e.default.createElement(\"div\",{className:\"statistic-block__title\"},\"Заработано\"),e.default.createElement(\"div\",{className:\"statistic-row\"},e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Всего\"),e.default.createElement(\"div\",null,this.moneyPrettify(this.state.moneyTotal),\"$\")),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"В этом месяце\"),e.default.createElement(\"div\",null,this.moneyPrettify(this.state.moneyMouth),\"$\")),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Сегодня\"),e.default.createElement(\"div\",null,this.moneyPrettify(this.state.moneyToday),\"$\"))))),e.default.createElement(\"img\",{src:t.default.line,alt:\"\",className:\"statistic__line\"}),e.default.createElement(\"div\",{className:\"statistic-row\"},e.default.createElement(\"div\",{className:\"statistic-row__title\"},\"Список работ\"),e.default.createElement(\"img\",{src:a.default.arrow,alt:\"\",onClick:function(){return l.setPage(!1)},className:\"statistic-row__arrow \".concat(0!==this.state.page?\"statistic-active\":null)}),e.default.createElement(\"img\",{src:a.default.arrow,alt:\"\",onClick:function(){return l.setPage(!0)},className:\"statistic-row__arrow \".concat(this.state.page!==this.maxPage?\"statistic-active\":null)})),e.default.createElement(\"div\",{className:\"statistic-jobs\"},this.state.jobs.sort(function(e,t){return t.lvl-e.lvl}).map(function(r,n){return l.preRenderCheck(n)?e.default.createElement(\"div\",{className:\"statistic-jobs-block\",key:n},e.default.createElement(\"img\",{src:t.default[r.img],className:\"statistic-jobs-block__background\",alt:\"\"}),0===n&&e.default.createElement(\"img\",{src:a.default.plate,alt:\"\",className:\"statistic-jobs-block__plate\"}),e.default.createElement(\"div\",{className:\"statistic-jobs-block__title\"},r.title),e.default.createElement(\"div\",{className:\"statistic-row\"},e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Уровень\"),e.default.createElement(\"div\",null,r.lvl+1,\"/\",r.maxLvl)),e.default.createElement(\"div\",{className:\"statistic__stats\"},e.default.createElement(\"span\",null,\"Опыт\"),e.default.createElement(\"div\",null,r.exp,\"/\",r.maxExp,\"exp\"))),e.default.createElement(\"div\",{className:\"statistic-jobs-block-progress\"},e.default.createElement(\"div\",{style:{width:r.exp/r.maxExp*100+\"%\"}}))):null})))}}]),o}();"},"sourceMaps":null,"error":null,"hash":"28c1db22fcfa4badce8b735f25e91480","cacheData":{"env":{}}}