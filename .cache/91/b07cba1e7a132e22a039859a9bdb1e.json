{"id":"P4AI","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":33,"index":33},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\index.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"../../modules/custom.event","loc":{"line":2,"column":28,"index":71},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"./style.less","loc":{"line":3,"column":7,"index":109},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\style.less"},{"name":"../../modules/CEF","loc":{"line":4,"column":20,"index":146},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\CEF.ts"},{"name":"react-select","loc":{"line":5,"column":19,"index":187},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\index.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react-select\\dist\\react-select.browser.esm.js"},{"name":"react-draggable","loc":{"line":6,"column":22,"index":226},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\index.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react-draggable\\build\\cjs\\cjs.js"},{"name":"../../modules/system","loc":{"line":7,"column":23,"index":269},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\AdminPanel\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\system.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.AdminPanelComponent=void 0;var e=u(require(\"react\")),t=require(\"../../modules/custom.event\");require(\"./style.less\");var n=require(\"../../modules/CEF\"),a=l(require(\"react-select\")),r=l(require(\"react-draggable\")),i=require(\"../../modules/system\");function l(e){return e&&e.__esModule?e:{default:e}}function o(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(\"default\"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=r?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}function c(e){return(c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e){return p(e)||m(e)||f(e)||d()}function d(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function f(e,t){if(e){if(\"string\"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function m(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}function p(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,E(a.key),a)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function E(e){var t=g(e,\"string\");return\"symbol\"===c(t)?t:String(t)}function g(e,t){if(\"object\"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||\"default\");if(\"object\"!==c(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function O(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=R();return function(){var n,a=w(e);if(t){var r=w(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&(\"object\"===c(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return N(e)}function N(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function R(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=[{id:\"stats\",name:\"Информация\",needTime:!1,needReason:!1,needOnline:!1},{id:\"choice\",name:\"Доп.действия\",needTime:!1,needReason:!1,needOnline:!1},{id:\"ban\",name:\"Забанить персонажа\",needTime:!0,needReason:!0,needOnline:!1},{id:\"aban\",name:\"Забанить аккаунт\",needTime:!0,needReason:!0,needOnline:!1},{id:\"kick\",name:\"Кикнуть\",needTime:!1,needReason:!0,needOnline:!0},{id:\"kill\",name:\"Убить\",needTime:!1,needReason:!1,needOnline:!0},{id:\"fullhp\",name:\"Вылечить\",needTime:!1,needReason:!1,needOnline:!0},{id:\"cmute\",name:\"Текстовый мут\",needTime:!0,needReason:!0,needOnline:!0},{id:\"vmute\",name:\"Голосовой мут\",needTime:!0,needReason:!0,needOnline:!0},{id:\"freeze\",name:\"Фриз\",needTime:!1,needReason:!1,needOnline:!0},{id:\"tp\",name:\"ТП к цели\",needTime:!1,needReason:!1,needOnline:!0},{id:\"tpm\",name:\"ТП к себе\",needTime:!1,needReason:!1,needOnline:!0},{id:\"sp\",name:\"Наблюдать\",needTime:!1,needReason:!1,needOnline:!0},{id:\"cuff\",name:\"Наручники\",needTime:!1,needReason:!1,needOnline:!0}],_=exports.AdminPanelComponent=function(l){O(u,e.Component);var o=S(u);function u(e){var a;return v(this,u),(a=o.call(this,e)).state={inputReason:\"\",choiceTime:\"m\",inputTime:0,id:0,players:n.CEF.test?[[10,\"Xander Test\"],[11,\"Xander Test 1\"],[12,\"Xander Test 2\"],[13,\"Xander Test 3\"]]:[],show:!1,choice:F[0].id,inSp:n.CEF.test},a.ev=t.CustomEvent.register(\"admin:panel:show\",function(e,t,n){a.setState({id:n||a.state.id,show:e,players:t||[],data:n&&a.state.id!==n?null:a.state.data,inSp:!!n||a.state.inSp})}),a.ev2=t.CustomEvent.register(\"admin:panel:stats:data\",function(e,t){a.state.id===e&&a.setState({data:t})}),a}return b(u,[{key:\"choice\",get:function(){var e=this;return F.find(function(t){return t.id===e.state.choice})}},{key:\"componentWillUnmount\",value:function(){this.ev&&this.ev.destroy(),this.ev2&&this.ev2.destroy()}},{key:\"searchParams\",get:function(){return[].concat(s(this.state.players.map(function(e,t){return{value:\"\".concat(e[0]),label:\"[\".concat(e[0],\"] \").concat(e[1])}})),[{value:\"OFFLINE\",label:\"OFFLINE\",disabled:!0}])}},{key:\"searchTime\",get:function(){return[{value:\"m\",label:\"минут\"},{value:\"h\",label:\"часов\"},{value:\"d\",label:\"дней\"}]}},{key:\"ioOnline\",value:function(){var e=this;return this.state.players&&this.state.players.find(function(t){return t[0]===e.state.id})}},{key:\"render\",value:function(){var l=this;return this.state.show?e.default.createElement(r.default,{handle:\".title\"},e.default.createElement(\"div\",{className:\"admin_panel_block\"},e.default.createElement(\"h2\",{className:\"title\"},\"Быстрые действия\"),this.state.inSp?e.default.createElement(\"button\",{className:\"choiceButton\",onClick:function(e){e.preventDefault(),t.CustomEvent.triggerClient(\"admin:spectate:stop\",!0,!1),l.setState({inSp:!1})}},\"Выйти из наблюдения\"):e.default.createElement(e.default.Fragment,null),e.default.createElement(a.default,{onChange:function(e){var t=parseInt(e.value);l.setState({id:isNaN(t)?0:t,data:l.state.id===t?l.state.data:null})},classNamePrefix:\"user_role\",value:this.searchParams.find(function(e){return e.value==l.state.id.toString()||\"OFFLINE\"===e.value}),options:this.searchParams}),\"ID: \",e.default.createElement(\"input\",{type:\"number\",className:\"choiceButton\",value:this.state.id,onChange:function(e){e.preventDefault(),l.setState({id:e.currentTarget.valueAsNumber,data:l.state.id===e.currentTarget.valueAsNumber?l.state.data:null})}}),e.default.createElement(\"br\",null),F.map(function(t){return t.needOnline&&!l.ioOnline()?e.default.createElement(e.default.Fragment,null):e.default.createElement(\"button\",{className:\"choiceButton \"+(l.choice.id===t.id?\"selected\":\"\"),key:t.id,onClick:function(e){e.preventDefault(),l.setState({choice:t.id})}},t.name)}),e.default.createElement(\"br\",null),this.choice?e.default.createElement(e.default.Fragment,null,this.choice.needTime?e.default.createElement(e.default.Fragment,null,e.default.createElement(\"button\",{className:\"choiceButton\",disabled:!0},\"⌛\"),this.searchTime.map(function(t){return e.default.createElement(\"button\",{key:\"admin_panel_time_\".concat(t.value),className:\"choiceButton \"+(l.state.choiceTime===t.value?\"selected\":\"\"),onClick:function(e){e.preventDefault(),l.setState({choiceTime:t.value})}},t.label)}),e.default.createElement(\"input\",{className:\"choiceButton\",type:\"number\",min:0,max:600,step:1,value:this.state.inputTime,onChange:function(e){e.preventDefault(),l.setState({inputTime:e.currentTarget.valueAsNumber})}})):e.default.createElement(e.default.Fragment,null),this.choice.needReason?e.default.createElement(\"textarea\",{className:\"choiceButton textarea\",placeholder:\"Укажите причину\",value:this.state.inputReason,onChange:function(e){e.preventDefault(),l.setState({inputReason:e.currentTarget.value})}}):e.default.createElement(e.default.Fragment,null)):e.default.createElement(e.default.Fragment,null),e.default.createElement(\"div\",{className:\"stats\"},e.default.createElement(\"div\",{className:\"stats_title\"},\"Информация\"),e.default.createElement(\"div\",{className:\"stats_item\"},e.default.createElement(\"div\",null,\"Статус\"),e.default.createElement(\"div\",null,this.ioOnline()?\"ONLINE\":\"OFFLINE\")),this.state.data?this.state.data.map(function(t,n){return e.default.createElement(\"div\",{className:\"stats_item\",key:\"stats_item_\".concat(n)},e.default.createElement(\"div\",null,t[0]),e.default.createElement(\"div\",null,t[1]))}):e.default.createElement(e.default.Fragment,null)),this.state.id&&this.choice?e.default.createElement(\"button\",{className:\"choiceButton press\",onClick:function(e){var t;return e.preventDefault(),l.state.spam?n.CEF.alert.setAlert(\"error\",\"Подождите перед отправкой следующей команды\"):l.choice.needReason&&(null===(t=l.state.inputReason)||void 0===t?void 0:t.length)<3?n.CEF.alert.setAlert(\"error\",\"Укажите причину\"):l.choice.needTime&&(!l.state.inputTime||l.state.inputTime<0)?n.CEF.alert.setAlert(\"error\",\"Укажите время\"):(l.setState({spam:!0}),setTimeout(function(){l.setState({spam:!1})},1e3),void n.CEF.triggerChatCommand.apply(n.CEF,[\"adminPanel\",l.choice.id,\"\".concat(l.state.id),l.state.choiceTime,l.state.inputTime.toString()].concat(s(l.state.inputReason.split(\" \").map(function(e){return i.system.filterInput(e)})))))}},\"Выполнить\"):e.default.createElement(e.default.Fragment,null))):e.default.createElement(e.default.Fragment,null)}}]),u}();"},"sourceMaps":null,"error":null,"hash":"4e85d2157c64acd11c9c06e23edbbcf4","cacheData":{"env":{}}}