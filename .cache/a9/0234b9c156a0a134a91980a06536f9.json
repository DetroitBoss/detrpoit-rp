{"id":"BceF","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":33,"index":33},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"../../modules/custom.event","loc":{"line":2,"column":28,"index":71},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"./style.less","loc":{"line":3,"column":7,"index":109},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\style.less"},{"name":"../../modules/CEF","loc":{"line":4,"column":20,"index":146},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\CEF.ts"},{"name":"../UserMenu/assets/svg/close.svg","loc":{"line":5,"column":21,"index":189},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\assets\\svg\\close.svg"},{"name":"./images/*.svg","loc":{"line":6,"column":16,"index":242},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\images\\*.svg"},{"name":"react-draggable","loc":{"line":7,"column":22,"index":283},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react-draggable\\build\\cjs\\cjs.js"},{"name":"../../modules/system","loc":{"line":8,"column":23,"index":326},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\system.ts"},{"name":"../SocketSync","loc":{"line":9,"column":27,"index":378},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Drift\\index.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\SocketSync\\index.tsx"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.DriftScreen=exports.DriftCounterScreen=void 0;var e=c(require(\"react\")),t=require(\"../../modules/custom.event\");require(\"./style.less\");var r=require(\"../../modules/CEF\"),a=s(require(\"../UserMenu/assets/svg/close.svg\")),n=s(require(\"./images/*.svg\")),l=s(require(\"react-draggable\")),i=require(\"../../modules/system\"),u=require(\"../SocketSync\");function s(e){return e&&e.__esModule?e:{default:e}}function o(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(\"default\"!==l&&{}.hasOwnProperty.call(e,l)){var i=n?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}function f(e){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function b(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,E(a.key),a)}}function v(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function E(e){var t=h(e,\"string\");return\"symbol\"==f(t)?t:t+\"\"}function h(e,t){if(\"object\"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||\"default\");if(\"object\"!=f(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function g(e,t,r){return t=j(t),w(e,N()?Reflect.construct(t,r||[],j(e).constructor):t.apply(e,r))}function w(e,t){if(t&&(\"object\"==f(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return O(e)}function O(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(N=function(){return!!e})()}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var x=exports.DriftCounterScreen=function(a){function l(e){var a;return y(this,l),(a=g(this,l,[e])).state=r.CEF.test&&location.href.includes(\"=hud\")?{score:0,multiple:10,text:[\"asf\"],status:!1}:{score:0,multiple:0,text:[],status:!1},setTimeout(function(){t.CustomEvent.register(\"drift:score\",function(e,t,r){a.setState({score:e,multiple:t,text:r})}),t.CustomEvent.register(\"driftmap\",function(e){a.setState({status:e})})},5e3),a}return S(l,e.Component),v(l,[{key:\"componentDidUpdate\",value:function(){}},{key:\"render\",value:function(){var t=this;return e.default.createElement(e.default.Fragment,null,e.default.createElement(\"section\",{className:\"section-driftmod-wrapper\"},this.state.score?e.default.createElement(\"div\",{className:\"drift-counter-wrap\"},e.default.createElement(\"div\",{className:\"drift-x animated flipInX\"},\"x\",this.state.multiple.toFixed(1)),e.default.createElement(\"div\",{className:\"drift-size\"},i.system.numberFormat(this.state.score)),e.default.createElement(\"div\",{className:\"drift-styles\"},this.state.text.map(function(t,r){return e.default.createElement(\"div\",{className:\"\",key:\"drift_text_\".concat(r)},e.default.createElement(\"p\",null,t))}))):e.default.createElement(e.default.Fragment,null),this.state.status?e.default.createElement(u.SocketSync,{path:\"drift:hud\",data:function(e){var r=JSON.parse(e);t.setState({data:r})}},this.state.data?e.default.createElement(\"div\",{className:\"drift-reputation\"},e.default.createElement(\"div\",{className:\"drift-reputation-box first-large\"},e.default.createElement(\"p\",{className:\"drift-r-title\"},\"Мой \",e.default.createElement(\"strong\",null,\"результат\")),e.default.createElement(\"div\",{className:\"drift-r-text\"},e.default.createElement(\"p\",null,r.CEF.user.name),e.default.createElement(\"img\",{src:n.default.star,alt:\"\"})),e.default.createElement(\"div\",{className:\"drift-r-text\"},e.default.createElement(\"div\",{className:\"bage\"},e.default.createElement(\"small\",null,\"За все время\"),\" \",i.system.numberFormat(this.state.data.my[1])),e.default.createElement(\"div\",{className:\"bage ml18\"},e.default.createElement(\"small\",null,\"Сегодня\"),\" \",i.system.numberFormat(this.state.data.my[0])))),e.default.createElement(\"div\",{className:\"drift-reputation-box\"},e.default.createElement(\"p\",{className:\"drift-r-title\"},\"Топ 5 \",e.default.createElement(\"strong\",null,\"за сутки\")),this.state.data.today.map(function(t,r){return e.default.createElement(\"div\",{key:\"today_\".concat(r),className:\"drift-r-text\"},e.default.createElement(\"p\",null,t.name),e.default.createElement(\"div\",{className:\"bage\"},i.system.numberFormat(t.score)))})),e.default.createElement(\"div\",{className:\"drift-reputation-box\"},e.default.createElement(\"p\",{className:\"drift-r-title\"},\"Топ 5 \",e.default.createElement(\"strong\",null,\"дрифтеров\")),this.state.data.alltime.map(function(t,r){return e.default.createElement(\"div\",{key:\"all_\".concat(r),className:\"drift-r-text\"},e.default.createElement(\"p\",null,t[0]),e.default.createElement(\"div\",{className:\"bage\"},i.system.numberFormat(t[1])))}))):e.default.createElement(e.default.Fragment,null)):e.default.createElement(e.default.Fragment,null)))}}])}(),P=exports.DriftScreen=function(i){function u(e){var a;return y(this,u),(a=g(this,u,[e])).state={show:!1,block:!1},setTimeout(function(){t.CustomEvent.register(\"drift:setting\",function(e){a.setState(m(m({},e),{},{show:!0})),r.CEF.gui.enableCusrsor()})},5e3),a}return S(u,e.Component),v(u,[{key:\"componentDidMount\",value:function(){document.addEventListener(\"keydown\",this.handleKeyDown.bind(this))}},{key:\"componentWillUnmount\",value:function(){document.removeEventListener(\"keydown\",this.handleKeyDown.bind(this))}},{key:\"handleKeyDown\",value:function(e){var r=this;if(!this.state.block&&this.state.show&&this.state.status){var a=e.keyCode,n=this.state,l=n.ids,i=n.status,u=n.angle,s=n.speed;38===a&&(u=Math.min(u+5,100)),40===a&&(u=Math.max(u-5,0)),39===a&&(s=Math.min(s+5,100)),37===a&&(s=Math.max(s-5,0)),u===this.state.angle&&s===this.state.speed||this.setState({angle:u,speed:s,block:!0},function(){t.CustomEvent.triggerServer(\"drift:set\",{ids:l,status:i,angle:u,speed:s}),setTimeout(function(){r.setState({block:!1})},200)})}}},{key:\"render\",value:function(){var i=this;return this.state.show?e.default.createElement(l.default,{handle:\"#driftHeader\"},e.default.createElement(\"div\",{className:\"driftmod-box\"},e.default.createElement(\"i\",{className:\"driftmod-box-close-button\",onClick:function(e){i.setState({show:!1}),r.CEF.gui.disableCusrsor()}},e.default.createElement(\"img\",{src:a.default,alt:\"\"})),e.default.createElement(\"h2\",{id:\"driftHeader\"},\"Настройка\",e.default.createElement(\"br\",null),\"дрифта\"),e.default.createElement(\"div\",{className:\"switch-wrapper flex-line mb16\"},e.default.createElement(\"div\",{className:\"switch-wrap\"},e.default.createElement(\"input\",{type:\"checkbox\",id:\"switchCheck\",checked:!!this.state.status,onChange:function(e){e.preventDefault();var r=i.state,a=r.ids,n=r.status,l=r.angle,u=r.speed;n=!n,i.setState({status:n},function(){setTimeout(function(){i.setState({status:n})},100)}),t.CustomEvent.triggerServer(\"drift:set\",{ids:a,status:n,angle:l,speed:u})}}),e.default.createElement(\"label\",{htmlFor:\"switchCheck\"})),e.default.createElement(\"p\",{className:\"title ml8\"},e.default.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},\"Включить\"))),e.default.createElement(\"div\",{className:\"driftmod-buttons flex-line\"},e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:n.default[\"arrow-mini-white-top\"],alt:\"\"})),e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:n.default[\"arrow-mini-white-bottom\"],alt:\"\"})),e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:n.default[\"arrow-mini-white-left\"],alt:\"\"})),e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:n.default[\"arrow-mini-white-right\"],alt:\"\"})),e.default.createElement(\"p\",null,\"Регулировка\")),e.default.createElement(\"div\",{className:\"drift-grid-wrap\"},e.default.createElement(\"p\",null,\"Угол\"),e.default.createElement(\"p\",null,\"Скорость\"),e.default.createElement(\"div\",{className:\"drift-grid\"},e.default.createElement(\"div\",{className:\"drift-mod-regulator\",style:{bottom:\"\".concat(this.state.angle,\"%\"),left:\"\".concat(this.state.speed,\"%\")}}),e.default.createElement(\"img\",{src:n.default[\"drift-grid\"],alt:\"\"}))))):e.default.createElement(e.default.Fragment,null)}}])}();"},"sourceMaps":null,"error":null,"hash":"f45116aaa884559b765da4e1d7c0736a","cacheData":{"env":{}}}