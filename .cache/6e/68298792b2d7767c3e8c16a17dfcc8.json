{"id":"IspO","dependencies":[{"name":"C:\\onyx_V2\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"./custom.event","loc":{"line":1,"column":28,"index":28},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../shared/file.storage","loc":{"line":2,"column":33,"index":80},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\src\\shared\\file.storage.ts"},{"name":"../assets/sounds/*.ogg","loc":{"line":3,"column":19,"index":129},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\src\\cef\\assets\\sounds\\*.ogg"},{"name":"../assets/sounds/*.wav","loc":{"line":4,"column":21,"index":177},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\src\\cef\\assets\\sounds\\*.wav"},{"name":"../../shared/web","loc":{"line":5,"column":39,"index":243},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\src\\shared\\web.ts"},{"name":"../assets/sounds/*.mp3","loc":{"line":6,"column":23,"index":287},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\src\\cef\\assets\\sounds\\*.mp3"},{"name":"howler","loc":{"line":7,"column":21,"index":335},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\node_modules\\howler\\dist\\howler.js"},{"name":"./fractions","loc":{"line":8,"column":28,"index":374},"parent":"C:\\onyx_V2\\server\\src\\cef\\modules\\CEF.ts","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\fractions.ts"}],"generated":{"js":"var define;\nvar global = arguments[3];\nvar t,e=arguments[3];Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.dressCfg=exports.CEF=void 0;var n=require(\"./custom.event\"),r=require(\"../../shared/file.storage\"),o=f(require(\"../assets/sounds/*.ogg\")),i=f(require(\"../assets/sounds/*.wav\")),u=require(\"../../shared/web\"),c=f(require(\"../assets/sounds/*.mp3\")),a=require(\"howler\"),s=require(\"./fractions\");function f(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function p(){\"use strict\";p=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i=\"function\"==typeof Symbol?Symbol:{},u=i.iterator||\"@@iterator\",c=i.asyncIterator||\"@@asyncIterator\",a=i.toStringTag||\"@@toStringTag\";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},\"\")}catch(t){s=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,u=Object.create(i.prototype),c=new k(r||[]);return o(u,\"_invoke\",{value:T(t,n,c)}),u}function g(t,e,n){try{return{type:\"normal\",arg:t.call(e,n)}}catch(t){return{type:\"throw\",arg:t}}}e.wrap=f;var h=\"suspendedStart\",d=\"suspendedYield\",v=\"executing\",m=\"completed\",y={};function w(){}function b(){}function E(){}var L={};s(L,u,function(){return this});var C=Object.getPrototypeOf,O=C&&C(C(A([])));O&&O!==n&&r.call(O,u)&&(L=O);var x=E.prototype=w.prototype=Object.create(L);function S(t){[\"next\",\"throw\",\"return\"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){function n(o,i,u,c){var a=g(t[o],t,i);if(\"throw\"!==a.type){var s=a.arg,f=s.value;return f&&\"object\"==l(f)&&r.call(f,\"__await\")?e.resolve(f.__await).then(function(t){n(\"next\",t,u,c)},function(t){n(\"throw\",t,u,c)}):e.resolve(f).then(function(t){s.value=t,u(s)},function(t){return n(\"throw\",t,u,c)})}c(a.arg)}var i;o(this,\"_invoke\",{value:function(t,r){function o(){return new e(function(e,o){n(t,r,e,o)})}return i=i?i.then(o,o):o()}})}function T(e,n,r){var o=h;return function(i,u){if(o===v)throw new Error(\"Generator is already running\");if(o===m){if(\"throw\"===i)throw u;return{value:t,done:!0}}for(r.method=i,r.arg=u;;){var c=r.delegate;if(c){var a=P(c,r);if(a){if(a===y)continue;return a}}if(\"next\"===r.method)r.sent=r._sent=r.arg;else if(\"throw\"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else\"return\"===r.method&&r.abrupt(\"return\",r.arg);o=v;var s=g(e,n,r);if(\"normal\"===s.type){if(o=r.done?m:d,s.arg===y)continue;return{value:s.arg,done:r.done}}\"throw\"===s.type&&(o=m,r.method=\"throw\",r.arg=s.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,\"throw\"===r&&e.iterator.return&&(n.method=\"return\",n.arg=t,P(e,n),\"throw\"===n.method)||\"return\"!==r&&(n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a '\"+r+\"' method\")),y;var i=g(o,e.iterator,n.arg);if(\"throw\"===i.type)return n.method=\"throw\",n.arg=i.arg,n.delegate=null,y;var u=i.arg;return u?u.done?(n[e.resultName]=u.value,n.next=e.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=t),n.delegate=null,y):u:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,y)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(R,this),this.reset(!0)}function A(e){if(e||\"\"===e){var n=e[u];if(n)return n.call(e);if(\"function\"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(l(e)+\" is not iterable\")}return b.prototype=E,o(x,\"constructor\",{value:E,configurable:!0}),o(E,\"constructor\",{value:b,configurable:!0}),b.displayName=s(E,a,\"GeneratorFunction\"),e.isGeneratorFunction=function(t){var e=\"function\"==typeof t&&t.constructor;return!!e&&(e===b||\"GeneratorFunction\"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,s(t,a,\"GeneratorFunction\")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},S(_.prototype),s(_.prototype,c,function(){return this}),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var u=new _(f(t,n,r,o),i);return e.isGeneratorFunction(n)?u:u.next().then(function(t){return t.done?t.value:u.next()})},S(x),s(x,a,\"Generator\"),s(x,u,function(){return this}),s(x,\"toString\",function(){return\"[object Generator]\"}),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)\"t\"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type=\"throw\",c.arg=e,n.next=r,o&&(n.method=\"next\",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i],c=u.completion;if(\"root\"===u.tryLoc)return o(\"end\");if(u.tryLoc<=this.prev){var a=r.call(u,\"catchLoc\"),s=r.call(u,\"finallyLoc\");if(a&&s){if(this.prev<u.catchLoc)return o(u.catchLoc,!0);if(this.prev<u.finallyLoc)return o(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return o(u.catchLoc,!0)}else{if(!s)throw new Error(\"try statement without catch or finally\");if(this.prev<u.finallyLoc)return o(u.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,\"finallyLoc\")&&this.prev<o.finallyLoc){var i=o;break}}i&&(\"break\"===t||\"continue\"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method=\"next\",this.next=i.finallyLoc,y):this.complete(u)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if(\"throw\"===r.type){var o=r.arg;j(n)}return o}}throw new Error(\"illegal catch attempt\")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},\"next\"===this.method&&(this.arg=t),y}},e}function g(t,e,n,r,o,i,u){try{var c=t[i](u),a=c.value}catch(s){return void n(s)}c.done?e(a):Promise.resolve(a).then(r,o)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function u(t){g(i,r,o,u,c,\"next\",t)}function c(t){g(i,r,o,u,c,\"throw\",t)}u(void 0)})}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){m(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){var e=w(t,\"string\");return\"symbol\"===l(e)?e:String(e)}function w(t,e){if(\"object\"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||\"default\");if(\"object\"!==l(r))return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}var b=0,E=0,L=\"\",C=0,O=0;setTimeout(function(){n.CustomEvent.register(\"user:fraction\",function(t){b=t}),n.CustomEvent.register(\"user:rank\",function(t){E=t}),n.CustomEvent.register(\"user:tag\",function(t){L=t}),n.CustomEvent.register(\"signatureKey\",function(t,e,n){S=t,T=e,_=n,A()}),n.CustomEvent.register(\"user:family\",function(t,e){C=t,O=e})},3e3);var x,S=\"\",_=\"127.0.0.1\",T=!1,P=0,R=0,j=0,k=exports.dressCfg=[],A=function(){G.getDressData().then(function(t){exports.dressCfg=k=t})};n.CustomEvent.register(\"dressData:remove\",function(t){k.map(function(e,n){e.id===t&&k.splice(n,1)})}),n.CustomEvent.register(\"dressData:new\",function(t){t&&JSON.parse(t).map(function(t){var e=k.findIndex(function(e){return e.id===t.id});e>-1?k[e]=v(v({},k[e]),t):k.push(t)})});var G=exports.CEF={triggerChatCommand:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=mp).trigger.apply(t,[\"chatCommand\"].concat(n))},getCatalog:function(t){return new Promise(function(e){var n=new XMLHttpRequest;return n.open(\"GET\",\"http://\".concat(_,\":\").concat(u.WEB_DATA_PORT_EXTERNAL,\"/business/catalog?id=\").concat(t),!1),n.send(null),e(JSON.parse(n.responseText))})},getDressPersonage:function(t){return new Promise(function(e){var n=new XMLHttpRequest;return n.open(\"GET\",\"http://\".concat(_,\":\").concat(u.WEB_DATA_PORT_EXTERNAL,\"/personage/dress?male=\").concat(t),!1),n.send(null),e(JSON.parse(n.responseText))})},getDressData:function(){return new Promise(function(t){var e=new XMLHttpRequest;return e.open(\"GET\",\"http://\".concat(_,\":\").concat(u.WEB_DATA_PORT_EXTERNAL,\"/dress/data\"),!1),e.send(null),t(JSON.parse(e.responseText))})},enterPromocode:function(t){t&&\"string\"==typeof t&&n.CustomEvent.triggerServer(\"promocode:use\",t.toLowerCase())},enterPromocodeMedia:function(t){t&&\"string\"==typeof t&&n.CustomEvent.triggerServer(\"promocode:use:media\",t.toLowerCase())},stopSound:function(){x&&x.playing()&&x.unload()},playSound:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.08,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=o.default,u=i.default,s=r[t]||u[t]||c.default[t]||t;n&&G.stopSound();var f=new a.Howl({src:[s],autoplay:!0,loop:!1,volume:e});return n&&(x=f),f},getSignatureURL:function(t){return\"http://\".concat(r.FILE_STORAGE_URL,\"/files/signatures/\").concat(T?\"test_\":\"\").concat(t,\".png\")},getBusinessURL:function(t){return\"http://\".concat(r.FILE_STORAGE_URL,\"/files/business/\").concat(T?\"test_\":\"\").concat(t,\".png\")},getHomeURL:function(t){return\"http://\".concat(r.FILE_STORAGE_URL,\"/files/homes/\").concat(t,\".png\")},getVehicleURL:function(t){return\"http://\".concat(r.FILE_STORAGE_URL,\"/files/vehicles/\").concat(t.toLowerCase(),\".png\")},getAnimsURL:function(t){return\"http://\".concat(r.FILE_STORAGE_URL,\"/files/anims/\").concat(t,\".gif\")},saveSignature:function(t,e){return new Promise(function(n){var o=new XMLHttpRequest,i=new FormData;i.append(\"photo\",t),o.open(\"POST\",\"https://\".concat(r.FILE_STORAGE_URL,\"/signature/load?id=\").concat(G.id,\"&code=\").concat(G.signature,\"&document_name=\").concat(T?\"test_\":\"\").concat(e)),o.send(i),o.onload=function(){200!=o.status?n(!1):n(!0)},o.onerror=function(){n(!1)}})},get signature(){return S},setGPS:function(t,e,r){n.CustomEvent.triggerClient(\"gps:set\",t,e,r)},id:location.host.includes(\":1234\")?1:0,admin:!1,setId:function(t){G.id=t},setAdmin:function(t){G.admin=t},formatTime:function(t){var e=Math.floor(t/60),n=t%60,r=String(e),o=String(n);return e<10&&(r=\"0\".concat(e)),n<10&&(o=\"0\".concat(n)),\"\".concat(r,\":\").concat(o)},user:{name:null,get fraction(){return b},set fraction(t){b=t},get fractionCfg(){return G.user.fraction?s.fractionCfg.getFraction(G.user.fraction):null},get rank(){return E},set rank(t){E=t},get tag(){return L},get isLeader(){return!!G.user.fraction&&s.fractionCfg.getLeaderRank(this.fraction)===this.rank},get isSubLeader(){return!!G.user.fraction&&s.fractionCfg.getSubLeaderRank(this.fraction)<=this.rank},get money(){return P},get chips(){return j},get bank(){return R},set money(t){P=t},set chips(t){j=t},set bank(t){R=t},get family(){return C},set family(t){C=t},get familyRank(){return O},set familyRank(t){O=t},getIsMale:function(){var t=h(p().mark(function t(){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.CustomEvent.callClient(\"cef:getIsMale\");case 2:return t.abrupt(\"return\",t.sent);case 3:case\"end\":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},alert:{setSafezoneInfo:function(t,e,r,o){return n.CustomEvent.trigger(\"cef:alert:setSafezoneInfo\",t,e,r,o)},setAlert:function(t,e,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;return n.CustomEvent.trigger(\"cef:alert:setAlert\",t,e,r,o)},setHelp:function(t){return n.CustomEvent.trigger(\"cef:alert:setHelp\",t)},setHelpKey:function(t,e){return n.CustomEvent.trigger(\"cef:alert:setHelpKey\",t,e)},removeHelpKey:function(){return n.CustomEvent.trigger(\"cef:alert:removeHelpKey\")}},gui:{saveLogin:function(t){n.CustomEvent.triggerClient(\"auth:saveLogin\",t)},currentGui:null,setGui:function(t){G.gui.currentGui=t,n.CustomEvent.trigger(\"setGui\",t)},setCursor:function(t){mp.trigger(\"cef:setCursor\",t)},enableCusrsor:function(){mp.trigger(\"enableCursor\")},disableCusrsor:function(){mp.trigger(\"disableCursor\")},close:function(){n.CustomEvent.triggerClient(\"gui::closeCurrent\")}},hud:{setCasinoInt:function(t){},setCustomZone:function(t,e){},setWeapon:function(t){},setBullets:function(t,e){},setMoney:function(t){},setChips:function(t){},setMoneyBank:function(t){},setMicrophone:function(t){},setRadio:function(t){},lockMicrophone:function(t){},setHasWatch:function(t){},setTime:function(t){},setDate:function(t){},setTemp:function(t){},setCompass:function(t){},setStat:function(t,e,n,r){arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6]},setZone:function(t,e){},showHud:function(t){},toggleDeathTimer:function(t){},setDeathTime:function(t){},setTextText:function(t){},setTextTime:function(t){},raceData:function(t,e,n,r){},disableRace:function(){},setInfoLinePos:function(t,e){},updateHelpToggle:function(t){}},speedometer:{setSpeed:function(t){},setFuel:function(t){},setEngine:function(t){},setLockCar:function(t){},setLights:function(t){},setSpeedometer:function(t){}},get test(){return location.host.includes(\":1234\")},get testGui(){return location.href.includes(\"?test=\")},copy:F,focusInput:!1};function I(t){var e=document.createElement(\"textarea\");e.value=t,e.style.top=\"0\",e.style.left=\"0\",e.style.position=\"fixed\",document.body.appendChild(e),e.focus(),e.select();try{var n=document.execCommand(\"copy\")?\"successful\":\"unsuccessful\";console.log(\"Fallback: Copying text command was \"+n)}catch(r){console.error(\"Fallback: Oops, unable to copy\",r)}document.body.removeChild(e)}function F(t){navigator.clipboard?navigator.clipboard.writeText(t).then(function(){console.log(\"Async: Copying to clipboard was successful!\")},function(t){console.error(\"Async: Could not copy text: \",t)}):I(t)}n.CustomEvent.register(\"cef:copytext\",function(t){G.copy(t)});var D=0;document.addEventListener(\"focusin\",function(t){\"submit\"!==t.target.type&&D++}),document.addEventListener(\"focusout\",function(t){\"submit\"!==t.target.type&&D--}),setInterval(function(){window.scroll(0,0);var t=!!D;t!==G.focusInput&&(G.focusInput=t,n.CustomEvent.triggerClient(\"inputOnFocus\",G.focusInput))},200),e.CEF=G;"},"sourceMaps":null,"error":null,"hash":"4719067b0c15dbe15f9c83f78b00ab39","cacheData":{"env":{}}}