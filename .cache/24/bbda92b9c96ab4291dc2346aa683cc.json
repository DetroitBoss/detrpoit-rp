{"id":"bR3y","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":33,"index":33},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"./style.less","loc":{"line":2,"column":7,"index":50},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\style.less"},{"name":"./assets/fleeca.svg","loc":{"line":3,"column":19,"index":86},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\fleeca.svg"},{"name":"./assets/lines.svg","loc":{"line":4,"column":18,"index":128},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\lines.svg"},{"name":"./assets/cardBlack.png","loc":{"line":5,"column":22,"index":173},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\cardBlack.png"},{"name":"./assets/cardPlatinum.png","loc":{"line":6,"column":25,"index":225},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\cardPlatinum.png"},{"name":"./assets/cardGold.png","loc":{"line":7,"column":21,"index":276},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\cardGold.png"},{"name":"./assets/cardIcon.png","loc":{"line":8,"column":21,"index":323},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\cardIcon.png"},{"name":"./assets/point.svg","loc":{"line":9,"column":18,"index":367},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\point.svg"},{"name":"./assets/sharpIcon.svg","loc":{"line":10,"column":22,"index":412},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\sharpIcon.svg"},{"name":"./assets/starIcon.svg","loc":{"line":11,"column":21,"index":460},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\starIcon.svg"},{"name":"./assets/minus.svg","loc":{"line":12,"column":18,"index":504},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\minus.svg"},{"name":"./assets/plus.svg","loc":{"line":13,"column":17,"index":544},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\plus.svg"},{"name":"./assets/walletIcon.svg","loc":{"line":14,"column":23,"index":589},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\walletIcon.svg"},{"name":"./assets/houseIcon.svg","loc":{"line":15,"column":22,"index":639},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\houseIcon.svg"},{"name":"./assets/businessIcon.svg","loc":{"line":16,"column":25,"index":691},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\assets\\businessIcon.svg"},{"name":"../NumberPlate/assets/images/exitIcon.svg","loc":{"line":17,"column":21,"index":742},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\NumberPlate\\assets\\images\\exitIcon.svg"},{"name":"../../modules/CEF","loc":{"line":18,"column":20,"index":808},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\CEF.ts"},{"name":"../../modules/custom.event","loc":{"line":19,"column":28,"index":858},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../../shared/economy","loc":{"line":20,"column":60,"index":949},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\economy.ts"},{"name":"../../../shared/system","loc":{"line":21,"column":27,"index":1004},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Bank\\Bank.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\system.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Bank=void 0;var e=_(require(\"react\"));require(\"./style.less\");var t,n,a,r=N(require(\"./assets/fleeca.svg\")),o=N(require(\"./assets/lines.svg\")),s=N(require(\"./assets/cardBlack.png\")),c=N(require(\"./assets/cardPlatinum.png\")),i=N(require(\"./assets/cardGold.png\")),l=N(require(\"./assets/cardIcon.png\")),u=N(require(\"./assets/point.svg\")),d=N(require(\"./assets/sharpIcon.svg\")),f=N(require(\"./assets/starIcon.svg\")),m=N(require(\"./assets/minus.svg\")),h=N(require(\"./assets/plus.svg\")),p=N(require(\"./assets/walletIcon.svg\")),v=N(require(\"./assets/houseIcon.svg\")),b=N(require(\"./assets/businessIcon.svg\")),y=N(require(\"../NumberPlate/assets/images/exitIcon.svg\")),g=require(\"../../modules/CEF\"),E=require(\"../../modules/custom.event\"),k=require(\"../../../shared/economy\"),C=require(\"../../../shared/system\");function N(e){return e&&e.__esModule?e:{default:e}}function w(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(\"default\"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}function x(e){return(x=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function O(){O=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o=\"function\"==typeof Symbol?Symbol:{},s=o.iterator||\"@@iterator\",c=o.asyncIterator||\"@@asyncIterator\",i=o.toStringTag||\"@@toStringTag\";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},\"\")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof b?t:b,s=Object.create(o.prototype),c=new T(a||[]);return r(s,\"_invoke\",{value:S(e,n,c)}),s}function d(e,t,n){try{return{type:\"normal\",arg:e.call(t,n)}}catch(e){return{type:\"throw\",arg:e}}}t.wrap=u;var f=\"suspendedStart\",m=\"suspendedYield\",h=\"executing\",p=\"completed\",v={};function b(){}function y(){}function g(){}var E={};l(E,s,function(){return this});var k=Object.getPrototypeOf,C=k&&k(k(L([])));C&&C!==n&&a.call(C,s)&&(E=C);var N=g.prototype=b.prototype=Object.create(E);function w(e){[\"next\",\"throw\",\"return\"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){function n(r,o,s,c){var i=d(e[r],e,o);if(\"throw\"!==i.type){var l=i.arg,u=l.value;return u&&\"object\"==x(u)&&a.call(u,\"__await\")?t.resolve(u.__await).then(function(e){n(\"next\",e,s,c)},function(e){n(\"throw\",e,s,c)}):t.resolve(u).then(function(e){l.value=e,s(l)},function(e){return n(\"throw\",e,s,c)})}c(i.arg)}var o;r(this,\"_invoke\",{value:function(e,a){function r(){return new t(function(t,r){n(e,a,t,r)})}return o=o?o.then(r,r):r()}})}function S(t,n,a){var r=f;return function(o,s){if(r===h)throw new Error(\"Generator is already running\");if(r===p){if(\"throw\"===o)throw s;return{value:e,done:!0}}for(a.method=o,a.arg=s;;){var c=a.delegate;if(c){var i=P(c,a);if(i){if(i===v)continue;return i}}if(\"next\"===a.method)a.sent=a._sent=a.arg;else if(\"throw\"===a.method){if(r===f)throw r=p,a.arg;a.dispatchException(a.arg)}else\"return\"===a.method&&a.abrupt(\"return\",a.arg);r=h;var l=d(t,n,a);if(\"normal\"===l.type){if(r=a.done?p:m,l.arg===v)continue;return{value:l.arg,done:a.done}}\"throw\"===l.type&&(r=p,a.method=\"throw\",a.arg=l.arg)}}}function P(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,\"throw\"===a&&t.iterator.return&&(n.method=\"return\",n.arg=e,P(t,n),\"throw\"===n.method)||\"return\"!==a&&(n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a '\"+a+\"' method\")),v;var o=d(r,t.iterator,n.arg);if(\"throw\"===o.type)return n.method=\"throw\",n.arg=o.arg,n.delegate=null,v;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=e),n.delegate=null,v):s:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(A,this),this.reset(!0)}function L(t){if(t||\"\"===t){var n=t[s];if(n)return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(x(t)+\" is not iterable\")}return y.prototype=g,r(N,\"constructor\",{value:g,configurable:!0}),r(g,\"constructor\",{value:y,configurable:!0}),y.displayName=l(g,i,\"GeneratorFunction\"),t.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===y||\"GeneratorFunction\"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,i,\"GeneratorFunction\")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},w(_.prototype),l(_.prototype,c,function(){return this}),t.AsyncIterator=_,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var s=new _(u(e,n,a,r),o);return t.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},w(N),l(N,i,\"Generator\"),l(N,s,function(){return this}),l(N,\"toString\",function(){return\"[object Generator]\"}),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)\"t\"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return c.type=\"throw\",c.arg=t,n.next=a,r&&(n.method=\"next\",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],c=s.completion;if(\"root\"===s.tryLoc)return r(\"end\");if(s.tryLoc<=this.prev){var i=a.call(s,\"catchLoc\"),l=a.call(s,\"finallyLoc\");if(i&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(i){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error(\"try statement without catch or finally\");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,\"finallyLoc\")&&this.prev<r.finallyLoc){var o=r;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if(\"throw\"===a.type){var r=a.arg;j(n)}return r}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,n,a){return this.delegate={iterator:L(t),resultName:n,nextLoc:a},\"next\"===this.method&&(this.arg=e),v}},t}function S(e,t,n,a,r,o,s){try{var c=e[o](s),i=c.value}catch(l){return void n(l)}c.done?t(i):Promise.resolve(i).then(a,r)}function P(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function s(e){S(o,a,r,s,c,\"next\",e)}function c(e){S(o,a,r,s,c,\"throw\",e)}s(void 0)})}}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){T(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function T(e,t,n){return(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,B(a.key),a)}}function I(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function B(e){var t=q(e,\"string\");return\"symbol\"===x(t)?t:String(t)}function q(e,t){if(\"object\"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||\"default\");if(\"object\"!==x(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function F(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=W();return function(){var n,a=U(e);if(t){var r=U(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return $(this,n)}}function $(e,t){if(t&&(\"object\"===x(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return D(e)}function D(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function W(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=exports.Bank=function(N){F(_,e.Component);var w=G(_);function _(r){var o;return L(this,_),(o=w.call(this,r)).maxAmount=99999999,o.state={bankId:0,component:\"operations\",accountNumber:\"123123\",balance:54e4,cash:8e5,rate:1,isCashOut:!1,showMax:!1,activeBtnOperation:!1,commission:0,totalAmount:0,refOperationAmount:e.default.createRef(),refOperationCode:e.default.createRef(),taxes:{houses:[{id:0,name:\"Наименование дома\",address:\"3517 W. Gray St. Utica, Pennsylvania 57867\",taxAmountLeft:21e3,maxTaxAmount:3e4},{id:0,name:\"Наименование дома\",address:\"3517 W. Gray St. Utica, Pennsylvania 57867\",taxAmountLeft:21e3,maxTaxAmount:3e4},{id:0,name:\"Наименование дома\",address:\"3517 W. Gray St. Utica, Pennsylvania 57867\",taxAmountLeft:21e3,maxTaxAmount:3e4},{id:0,name:\"Наименование дома\",address:\"3517 W. Gray St. Utica, Pennsylvania 57867\",taxAmountLeft:21e3,maxTaxAmount:3e4}],businesses:[],warehouse:[]},taxesCat:\"houses\",rates:[{name:\"Debit\",amount:1e3,benefits:[\"Макс. баланс 10000000\"]},{name:\"Gold\",amount:2e4,benefits:[\"Макс. баланс 100000000\"]},{name:\"Platinum\",amount:5e4,benefits:[\"Макс. баланс 500000000\"]}],chooseRate:0,settingsComponent:\"changeCode\",refNewCode:e.default.createRef(),refOldCode:e.default.createRef(),refChangePin:e.default.createRef()},n=E.CustomEvent.register(\"bank:updateTax\",function(e,t){var n=o.state.taxes;n[t].splice(o.state.taxes[t].findIndex(function(t){return t.id===e}),1),o.setState(j(j({},o.state),{},{taxes:n}))}),a=E.CustomEvent.register(\"bank:updateCard\",function(e){o.setState(j(j({},o.state),{},{rate:e}))}),t=E.CustomEvent.register(\"bank:loadData\",function(e,t,n,a){o.setState({bankId:e,rate:t,accountNumber:n,taxes:a})}),o}return I(_,[{key:\"getTaxName\",value:function(e){switch(e){case\"houses\":return\"Дома\";case\"businesses\":return\"Бизнес\";case\"warehouse\":return\"Склад\"}}},{key:\"componentWillUnmount\",value:function(){t&&t.destroy()}},{key:\"exit\",value:function(){g.CEF.gui.setGui(null)}},{key:\"payAllTaxesForCat\",value:function(){var e=this;this.state.taxes[this.state.taxesCat].map(function(t){E.CustomEvent.triggerServer(\"bank:payTax\",t.id,e.state.taxesCat)})}},{key:\"payForItem\",value:function(e){E.CustomEvent.triggerServer(\"bank:payTax\",e,this.state.taxesCat)}},{key:\"changeRate\",value:function(){if(!(this.state.chooseRate<=this.state.rate)){var e=this.state.chooseRate;E.CustomEvent.triggerServer(\"bank:changeCard\",e)}}},{key:\"onClickChangeCode\",value:function(){var e=P(O().mark(function e(){var t,n;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.refOldCode.current.value,n=this.state.refNewCode.current.value,E.CustomEvent.triggerServer(\"atm:changePin\",this.state.accountNumber,t,n);case 2:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"orderCard\",value:function(){var e=P(O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.CustomEvent.triggerServer(\"bank:reissue\",this.state.refChangePin.current.value);case 1:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"closeAccount\",value:function(){E.CustomEvent.triggerServer(\"bank:closeCard\")}},{key:\"setComponent\",value:function(e){this.setState(j(j({},this.state),{},{component:e}))}},{key:\"setIsCashOut\",value:function(e){this.state.isCashOut!==e&&(this.state.refOperationAmount.current.value=\"\",this.setState(j(j({},this.state),{},{isCashOut:e,totalAmount:0})))}},{key:\"getTotalAmountForCat\",value:function(e){var t=this.state.taxes[e],n=0;return t.forEach(function(e){n+=e.maxTaxAmount-e.taxAmountLeft}),n<0?0:n}},{key:\"setTaxesCat\",value:function(e){this.setState(j(j({},this.state),{},{taxesCat:e}))}},{key:\"onChangeOperation\",value:function(e){var t=Number(this.state.refOperationAmount.current.value),n=this.state.refOperationCode.current.value;if(n.length>4&&(this.state.refOperationCode.current.value=n.substr(0,4)),/[^0-9.]/g.test(n)&&(this.state.refOperationCode.current.value=this.state.refOperationCode.current.value.replaceAll(/[^0-9.]/g,\"\")),t>this.maxAmount)return this.setState(j(j({},this.state),{},{commission:0,totalAmount:0,activeBtnOperation:!1,showMax:!0}));var a={};t<=this.maxAmount&&this.state.showMax&&(a.showMax=!1),e&&(a.commission=this.state.isCashOut?Math.round(t/100):0,a.totalAmount=t+a.commission),a.activeBtnOperation=!this.state.showMax&&!a.showMax&&4===n.length&&0!==t,this.setState(j(j({},this.state),a))}},{key:\"setChooseRate\",value:function(e){var t=this.state.chooseRate;if(e){if(this.state.chooseRate===this.state.rates.length-1)return;t+=1}else{if(0===this.state.chooseRate)return;t-=1}this.setState(j(j({},this.state),{},{chooseRate:t}))}},{key:\"getTransform\",value:function(){switch(this.state.chooseRate){case 0:return\"bank-card0\";case 1:return\"\";case 2:return\"bank-card2\";default:return\"\"}}},{key:\"setSettingsComponent\",value:function(e){this.setState(j(j({},this.state),{},{settingsComponent:e}))}},{key:\"onChangeCode\",value:function(e){var t=this.state.refOldCode.current.value,n=this.state.refNewCode.current.value;e?(t.length>4&&(this.state.refOldCode.current.value=t.substr(0,4)),/[^0-9.]/g.test(t)&&(this.state.refOldCode.current.value=this.state.refOldCode.current.value.replaceAll(/[^0-9.]/g,\"\"))):(n.length>4&&(this.state.refNewCode.current.value=t.substr(0,4)),/[^0-9.]/g.test(n)&&(this.state.refNewCode.current.value=this.state.refNewCode.current.value.replaceAll(/[^0-9.]/g,\"\")))}},{key:\"getCardStyle\",value:function(){switch(this.state.rate){case 0:return s.default;case 1:return i.default;case 2:return c.default;default:return s.default}}},{key:\"render\",value:function(){var t=this;return e.default.createElement(\"div\",{className:\"bank\"},e.default.createElement(\"img\",{src:r.default,className:\"bank__fleecaImg\",alt:\"\"}),e.default.createElement(\"img\",{src:o.default,className:\"bank__linesImg\",alt:\"\"}),e.default.createElement(\"div\",{className:\"exit\",onClick:function(){return t.exit()}},e.default.createElement(\"div\",{className:\"exit-icon\"},e.default.createElement(\"img\",{src:y.default,alt:\"#\"})),e.default.createElement(\"div\",{className:\"exit__title\"},\"Закрыть\")),e.default.createElement(\"div\",{className:\"bank-body\"},e.default.createElement(\"div\",{className:\"bank-body-left\"},e.default.createElement(\"div\",{className:\"bank-body-left__card\"},e.default.createElement(\"img\",{src:this.getCardStyle(),alt:\"\"}),e.default.createElement(\"p\",null,g.CEF.user.name)),e.default.createElement(\"div\",{className:\"bank-body-left-content\"},e.default.createElement(\"div\",{className:\"bank-body-left-content-yourCard\"},e.default.createElement(\"div\",{className:\"__title\"},\"Ваш баланс\"),e.default.createElement(\"img\",{src:l.default,className:\"bank-body-left-content-yourCard__cardIcon\",alt:\"\"}),e.default.createElement(\"span\",{className:\"bank-body-left-content-yourCard__cardName\"},\"Fleeca card\"),e.default.createElement(\"span\",{className:\"bank-body-left-content-yourCard__cardNumber\"},e.default.createElement(\"img\",{src:u.default,alt:\"\"}),e.default.createElement(\"img\",{src:u.default,alt:\"\"}),e.default.createElement(\"span\",null,this.state.accountNumber.replace(this.state.accountNumber.slice(0,-4),\"\"))),e.default.createElement(\"span\",{className:\"bank-body-left-content-yourCard__balance\"},\"$ \",g.CEF.user.bank.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \"))),e.default.createElement(\"div\",{className:\"bank-body-left-content-row\"},e.default.createElement(\"img\",{src:d.default,alt:\"\"}),e.default.createElement(\"div\",{className:\"bank-body-left-content-row__title\"},\"Номер счета\"),e.default.createElement(\"span\",null,this.state.accountNumber),e.default.createElement(\"div\",{className:\"bank-body-left-content-row__hr\"})),e.default.createElement(\"div\",{className:\"bank-body-left-content-row\"},e.default.createElement(\"img\",{src:f.default,alt:\"\"}),e.default.createElement(\"div\",{className:\"bank-body-left-content-row__title\"},\"Тариф\"),e.default.createElement(\"span\",null,this.state.rates[this.state.rate].name)),e.default.createElement(\"div\",{className:\"bank-body-left-content-footer displayNone\"},e.default.createElement(\"div\",{className:\"bank-body-left-content-footer__title\"},\"Управление бизнесом\"),e.default.createElement(\"div\",{className:\"bank-body-left-content-footer__text\"},\"Процент за обслуживание бизнеса\"),e.default.createElement(\"div\",{className:\"bank-body-left-content-footer__input\"},e.default.createElement(\"img\",{src:m.default,alt:\"\"}),e.default.createElement(\"span\",null,\"%\"),e.default.createElement(\"div\",null),e.default.createElement(\"input\",{type:\"number\"}),e.default.createElement(\"img\",{src:h.default,alt:\"\"}))))),e.default.createElement(\"div\",{className:\"bank-body-right\"},e.default.createElement(\"div\",{className:\"bank-body-right-nav\"},e.default.createElement(\"div\",{className:\"\".concat(\"operations\"===this.state.component?\"bank-active\":\"\"),onClick:function(){return t.setComponent(\"operations\")}},e.default.createElement(\"span\",null,\"Банковские операции\")),e.default.createElement(\"div\",{className:\"\".concat(\"taxes\"===this.state.component?\"bank-active\":\"\"),onClick:function(){return t.setComponent(\"taxes\")}},e.default.createElement(\"span\",null,\"Оплата налогов\")),e.default.createElement(\"div\",{className:\"\".concat(\"rate\"===this.state.component?\"bank-active\":\"\"),onClick:function(){return t.setComponent(\"rate\")}},e.default.createElement(\"span\",null,\"Смена тарифа карты\")),e.default.createElement(\"div\",{className:\"\".concat(\"settings\"===this.state.component?\"bank-active\":\"\"),onClick:function(){return t.setComponent(\"settings\")}},e.default.createElement(\"span\",null,\"Настройки и управление\"))),e.default.createElement(\"div\",{className:\"bank-body-right-content bank-body-right-content0 \\n                    \".concat(\"operations\"===this.state.component?\"\":\"displayNone\")},e.default.createElement(\"div\",{className:\"bank-body-right-content0__switcher\"},e.default.createElement(\"div\",{className:\"\".concat(this.state.isCashOut?\"\":\"bank-active\"),onClick:function(){return t.setIsCashOut(!1)}},\"Пополнение счета\"),e.default.createElement(\"div\",{className:\"\".concat(this.state.isCashOut?\"bank-active\":\"\"),onClick:function(){return t.setIsCashOut(!0)}},\"Снятие со счета\")),e.default.createElement(\"div\",{className:\"bank-body-right-content0-window\"},e.default.createElement(\"div\",{className:\"bank-body-right-content0-window__cashBalance\"},e.default.createElement(\"img\",{src:p.default,alt:\"\"}),\"$ \",g.CEF.user.money.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \")),e.default.createElement(\"div\",{className:\"bank-body-right-content0-window__title\"},\"Введите сумму\"),e.default.createElement(\"div\",{className:\"bank-body-right-content0-window-input\"},e.default.createElement(\"span\",null,\"$\"),e.default.createElement(\"div\",null),e.default.createElement(\"input\",{type:\"number\",ref:this.state.refOperationAmount,onChange:function(){return t.onChangeOperation(!0)}}),this.state.showMax&&e.default.createElement(\"p\",null,\"Макс. сумма $ \",this.maxAmount.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \"))),e.default.createElement(\"div\",{className:\"bank-body-right-content0-window-commission\"},e.default.createElement(\"div\",null,\"Комиссия (\",this.state.isCashOut?k.REMOVAL_BANK_MONEY_PERCENT:0,\"%) \",e.default.createElement(\"span\",null,\"$\",this.state.isCashOut?this.state.commission.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \"):0)),e.default.createElement(\"div\",null,\"Итог \",e.default.createElement(\"span\",null,\"$ \",this.state.totalAmount.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \"))))),e.default.createElement(\"div\",{className:\"bank-body-right-content0-pinTitle\"},\"Введите PIN-код\"),e.default.createElement(\"div\",{className:\"bank-body-right-content0-pin\"},e.default.createElement(\"input\",{ref:this.state.refOperationCode,type:\"password\",placeholder:\"••••\",onChange:function(){return t.onChangeOperation(t.state.isCashOut)}}),e.default.createElement(\"div\",{className:\"\".concat(this.state.activeBtnOperation?\"bank-active\":\"\"),onClick:function(){var e=P(O().mark(function e(){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.CustomEvent.callServer(\"pin:check\",t.state.accountNumber,t.state.refOperationCode.current.value);case 2:e.sent&&(t.state.isCashOut?E.CustomEvent.triggerServer(\"bank:witdraw\",t.state.bankId,t.state.totalAmount):E.CustomEvent.triggerServer(\"bank:deposit\",t.state.bankId,t.state.totalAmount));case 4:case\"end\":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},this.state.isCashOut?\"СНЯТЬ\":\"ПОПОЛНИТЬ\"))),e.default.createElement(\"div\",{className:\"bank-body-right-content bank-body-right-content1\\n                    \".concat(\"taxes\"===this.state.component?\"\":\"displayNone\")},e.default.createElement(\"div\",{className:\"bank-body-right-content1-nav\"},e.default.createElement(\"div\",{className:\"bank-body-right-content1-nav-block \".concat(\"houses\"===this.state.taxesCat?\"bank-active\":\"\"),onClick:function(){return t.setTaxesCat(\"houses\")}},e.default.createElement(\"img\",{src:v.default,alt:\"\"}),e.default.createElement(\"span\",null,\"Дома\"),e.default.createElement(\"div\",null,\"Всего\",e.default.createElement(\"p\",null,\"$ \",this.getTotalAmountForCat(\"houses\").toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \")))),e.default.createElement(\"div\",{className:\"bank-body-right-content1-nav-block \".concat(\"businesses\"===this.state.taxesCat?\"bank-active\":\"\"),onClick:function(){return t.setTaxesCat(\"businesses\")}},e.default.createElement(\"img\",{src:b.default,alt:\"\"}),e.default.createElement(\"span\",null,\"Бизнес\"),e.default.createElement(\"div\",null,\"Всего\",e.default.createElement(\"p\",null,\"$ \",this.getTotalAmountForCat(\"businesses\").toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \")))),e.default.createElement(\"div\",{className:\"bank-body-right-content1-nav-block \".concat(\"warehouse\"===this.state.taxesCat?\"bank-active\":\"\"),onClick:function(){return t.setTaxesCat(\"warehouse\")}},e.default.createElement(\"img\",{src:b.default,alt:\"\"}),e.default.createElement(\"span\",null,\"Склад\"),e.default.createElement(\"div\",null,\"Всего\",e.default.createElement(\"p\",null,\"$ \",this.getTotalAmountForCat(\"warehouse\").toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \"))))),e.default.createElement(\"div\",{className:\"bank-body-right-content1-title\"},this.getTaxName(this.state.taxesCat),e.default.createElement(\"div\",{className:\"bank-body-right-content1-title__button\",onClick:function(){return t.payAllTaxesForCat()}},\"Оплатить все за \",e.default.createElement(\"span\",null,\"$ \",this.getTotalAmountForCat(this.state.taxesCat).toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \")))),e.default.createElement(\"div\",{className:\"bank-body-right-content1-scroll\"},this.state.taxes[this.state.taxesCat].map(function(n,a){var r=n.address?n.address:n.numberPlate;return e.default.createElement(\"div\",{className:\"bank-body-right-content1-scroll-block\",key:a},e.default.createElement(\"div\",{className:\"bank-body-right-content1-scroll-block__left\"},e.default.createElement(\"div\",null,n.name),e.default.createElement(\"span\",null,r)),e.default.createElement(\"div\",{className:\"bank-body-right-content1-scroll-block__right\"},e.default.createElement(\"span\",null,\"$ \",(n.maxTaxAmount-n.taxAmountLeft<0?0:n.maxTaxAmount-n.taxAmountLeft).toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \")),e.default.createElement(\"div\",{onClick:function(){return t.payForItem(n.id)}},\"Оплатить\")))}))),e.default.createElement(\"div\",{className:\"bank-body-right-content bank-body-right-content2\\n                    \".concat(\"rate\"===this.state.component?\"\":\"displayNone\")},e.default.createElement(\"div\",{className:\"bank-body-right-content2__leftShadow\"}),e.default.createElement(\"div\",{className:\"bank-body-right-content2__rightShadow\"}),e.default.createElement(\"div\",{className:\"bank-body-right-content2__leftButton\",onClick:function(){return t.setChooseRate(!1)}}),e.default.createElement(\"div\",{className:\"bank-body-right-content2__rightButton\",onClick:function(){return t.setChooseRate(!0)}}),e.default.createElement(\"div\",{className:\"bank-body-right-content2-cards \".concat(this.getTransform())},e.default.createElement(\"div\",{className:\"\".concat(0===this.state.chooseRate?\"bank-active\":\"\")},e.default.createElement(\"img\",{src:s.default,alt:\"\"})),e.default.createElement(\"div\",{className:\"\".concat(1===this.state.chooseRate?\"bank-active\":\"\")},e.default.createElement(\"img\",{src:i.default,alt:\"\"})),e.default.createElement(\"div\",{className:\"\".concat(2===this.state.chooseRate?\"bank-active\":\"\")},e.default.createElement(\"img\",{src:c.default,alt:\"\"}))),e.default.createElement(\"div\",{className:\"bank-body-right-content2-cardInfo\"},e.default.createElement(\"div\",{className:\"bank-body-right-content2-cardInfo__title\"},this.state.rates[this.state.chooseRate].name,\" карта\"),e.default.createElement(\"div\",{className:\"bank-body-right-content2-cardInfo__li\"},this.state.rates[this.state.chooseRate].benefits.map(function(t,n){return e.default.createElement(\"span\",{key:n},t)})),e.default.createElement(\"div\",{className:\"bank-body-right-content2-cardInfo-button\"},e.default.createElement(\"span\",null,\"$ \",this.state.rates[this.state.chooseRate].amount.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g,\" \")),e.default.createElement(\"div\",{onClick:function(){return t.changeRate()},className:\"\".concat(this.state.chooseRate<=this.state.rate?\"bank-active\":\"\")},this.state.chooseRate===this.state.rate?\"Ваш тариф\":this.state.chooseRate>this.state.rate?\"Сменить\":\"Недоступно\")))),e.default.createElement(\"div\",{className:\"bank-body-right-content bank-body-right-content3\\n                    \".concat(\"settings\"===this.state.component?\"\":\"displayNone\")},e.default.createElement(\"div\",{className:\"bank-body-right-content3-buttons\"},e.default.createElement(\"div\",{className:\"\".concat(\"changeCode\"===this.state.settingsComponent?\"bank-active\":\"\"),onClick:function(){return t.setSettingsComponent(\"changeCode\")}},\"Изменить PIN-код\"),e.default.createElement(\"div\",{className:\"\".concat(\"orderCard\"===this.state.settingsComponent?\"bank-active\":\"\"),onClick:function(){return t.setSettingsComponent(\"orderCard\")}},\"Перевыпустить карту\"),e.default.createElement(\"div\",{className:\"\".concat(\"closeAccount\"===this.state.settingsComponent?\"bank-active\":\"\"),onClick:function(){return t.setSettingsComponent(\"closeAccount\")}},\"Закрыть счёт\")),e.default.createElement(\"div\",{className:\"bank-body-right-content3__hr\"}),\"changeCode\"===this.state.settingsComponent&&e.default.createElement(\"div\",{className:\"bank-body-right-content3-content \"},e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__title\"},\"Изменение PIN-кода\"),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__descriptionBig\"},\"Введите старый PIN-код\"),e.default.createElement(\"input\",{type:\"password\",placeholder:\"••••\",ref:this.state.refOldCode,onChange:function(){return t.onChangeCode(!0)}}),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__descriptionBig\"},\"Введите новый PIN-код\"),e.default.createElement(\"input\",{type:\"number\",placeholder:\"••••\",ref:this.state.refNewCode,onChange:function(){return t.onChangeCode(!1)}}),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__buttonBig\",onClick:function(){return t.onClickChangeCode()}},\"ИЗМЕНИТЬ\")),\"orderCard\"===this.state.settingsComponent&&e.default.createElement(\"div\",{className:\"bank-body-right-content3-content\"},e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__title\"},\"Перевыпустить карту\"),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__description\"},\"Введите пин-код для перевыпуска карты\"),e.default.createElement(\"input\",{type:\"password\",placeholder:\"••••\",ref:this.state.refChangePin,onChange:function(){return t.onChangeCode(!0)}}),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__price\"},e.default.createElement(\"span\",null,\"Стоимость\"),e.default.createElement(\"p\",null,\"$ \",C.systemUtil.numberFormat(k.newBankCardCost)),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__button\",onClick:function(){return t.orderCard()}},\"ПЕРЕВЫПУСТИТЬ\"))),\"closeAccount\"===this.state.settingsComponent&&e.default.createElement(\"div\",{className:\"bank-body-right-content3-content\"},e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__title\"},\"Закрыть счет\"),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__description\"},\"После закрытия счета ваша карта будет заблокирована. Все денежные средства которые на ней находятся будут переведены в наличные. После закрытия счета данный номер карты обратно будет получить невозможно.\"),e.default.createElement(\"div\",{className:\"bank-body-right-content3-content__button\",onClick:function(){return t.closeAccount()}},\"ЗАКРЫТЬ\"))))))}}]),_}();"},"sourceMaps":null,"error":null,"hash":"9fb01bbb8d05d4a5c3462eda12f5b74d","cacheData":{"env":{}}}