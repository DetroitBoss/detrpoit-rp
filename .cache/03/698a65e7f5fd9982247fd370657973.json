{"id":"v8sU","dependencies":[{"name":"C:\\onyx_V2\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"C:\\onyx_V2\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":18,"index":18},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\pages\\UserList\\UserList.tsx","resolved":"C:\\onyx_V2\\server\\node_modules\\react\\index.js"},{"name":"../../assets/*.svg","loc":{"line":2,"column":16,"index":44},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\pages\\UserList\\UserList.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\assets\\*.svg"},{"name":"../../../../../../../shared/fractions/ranks","loc":{"line":3,"column":32,"index":99},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\pages\\UserList\\UserList.tsx","resolved":"C:\\onyx_V2\\server\\src\\shared\\fractions\\ranks.ts"},{"name":"classnames","loc":{"line":4,"column":23,"index":170},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\pages\\UserList\\UserList.tsx","resolved":"C:\\onyx_V2\\server\\node_modules\\classnames\\index.js"},{"name":"../../../../../../modules/fractions","loc":{"line":5,"column":28,"index":213},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\pages\\UserList\\UserList.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\fractions.ts"},{"name":"../../../../../../modules/custom.event","loc":{"line":6,"column":28,"index":281},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\pages\\UserList\\UserList.tsx","resolved":"C:\\onyx_V2\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../../../../../../shared/system","loc":{"line":7,"column":27,"index":351},"parent":"C:\\onyx_V2\\server\\src\\cef\\components\\Tablet\\components\\Fraction\\pages\\UserList\\UserList.tsx","resolved":"C:\\onyx_V2\\server\\src\\shared\\system.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.UserList=void 0;var e=l(require(\"react\")),t=l(require(\"../../assets/*.svg\")),r=require(\"../../../../../../../shared/fractions/ranks\"),n=l(require(\"classnames\")),a=require(\"../../../../../../modules/fractions\"),i=require(\"../../../../../../modules/custom.event\"),s=require(\"../../../../../../../shared/system\");function l(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function f(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function d(e){var t=m(e,\"string\");return\"symbol\"===o(t)?t:String(t)}function m(e,t){if(\"object\"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||\"default\");if(\"object\"!==o(n))return n;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function b(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=y();return function(){var r,n=S(e);if(t){var a=S(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&(\"object\"===o(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return k(e)}function k(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function y(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=exports.UserList=function(l){b(u,e.default.Component);var o=p(u);function u(t){var r;return c(this,u),(r=o.call(this,t)).textRef=e.default.createRef(),r.state={chooseRankId:-1,showSubMenu:-1,sortByOnline:!1,sortBySymbols:!1,findText:\"\"},r}return f(u,[{key:\"chooseRank\",value:function(e){this.state.chooseRankId!==e&&this.setState({chooseRankId:e})}},{key:\"chooseRankClose\",value:function(e){this.state.chooseRankId===e&&this.setState({chooseRankId:-1})}},{key:\"changeShowSubMenu\",value:function(e){if(e===this.state.showSubMenu)return this.setState({showSubMenu:-1});this.setState({showSubMenu:e})}},{key:\"changeRank\",value:function(e,t){this.setState({chooseRankId:-1}),i.CustomEvent.triggerServer(\"faction:setRank\",e,t+1)}},{key:\"kickMember\",value:function(e){this.setState({showSubMenu:e}),i.CustomEvent.triggerServer(\"faction:kick\",e)}},{key:\"giveAward\",value:function(e){this.setState({showSubMenu:e}),i.CustomEvent.triggerServer(\"tablet:giveAward\",e)}},{key:\"changeWarns\",value:function(e,t){t?i.CustomEvent.triggerServer(\"tablet:giveFractionWarn\",e):i.CustomEvent.triggerServer(\"tablet:removeFractionWarn\",e)}},{key:\"getMembers\",value:function(){var e=this,t=this.props.members.sort(function(e,t){return t.rank-e.rank});return this.state.sortByOnline&&(t=t.filter(function(e){return!e.lastSeen})),this.state.sortBySymbols&&(t=t.sort(function(e,t){return e.name>t.name?1:-1})),\"\"!==this.state.findText&&(t=t.filter(function(t){return t.name.toLowerCase().includes(e.state.findText.toLowerCase())||\"\".concat(t.id).includes(e.state.findText)})),t}},{key:\"changeSearchText\",value:function(){this.setState({findText:this.textRef.current.value})}},{key:\"changeFilters\",value:function(e){e?this.setState({sortByOnline:!this.state.sortByOnline}):this.setState({sortBySymbols:!this.state.sortBySymbols})}},{key:\"render\",value:function(){var i=this;return e.default.createElement(\"div\",{className:\"tablet-fraction-body\"},e.default.createElement(\"div\",{className:\"tablet-fraction-body__title\"},\"Список участников\"),e.default.createElement(\"div\",{className:\"tablet-fraction-body__members\"},this.props.members.filter(function(e){return!e.lastSeen}).length,\" / \",this.props.members.length,\" \",e.default.createElement(\"span\",null,\"чел.\")),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist\"},e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-filter\"},e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-filter__checkbox\",onClick:function(){return i.changeFilters(!0)}},e.default.createElement(\"div\",{className:(0,n.default)({\"tablet-fraction-userlist-filter__checkbox-active\":this.state.sortByOnline})},e.default.createElement(\"img\",{src:t.default.checkmark,alt:\"\"})),\"Только Online\"),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-filter__checkbox\",onClick:function(){return i.changeFilters(!1)}},e.default.createElement(\"div\",{className:(0,n.default)({\"tablet-fraction-userlist-filter__checkbox-active\":this.state.sortBySymbols})},e.default.createElement(\"img\",{src:t.default.checkmark,alt:\"\"})),\"По алфавиту\"),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-filter__input\"},e.default.createElement(\"input\",{type:\"text\",ref:this.textRef,placeholder:\"Поиск\",onChange:function(){i.setState({findText:i.textRef.current.value})}}),e.default.createElement(\"img\",{src:t.default.search,onClick:function(){return i.changeSearchText()},alt:\"\"}))),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist__description\"},e.default.createElement(\"span\",null,\"ID\"),e.default.createElement(\"span\",null,\"Имя\"),this.props.rights.includes(r.FRACTION_RIGHTS.WARNS)&&e.default.createElement(\"span\",null,\"Выговор\"),this.props.rights.includes(r.FRACTION_RIGHTS.CHANGE_RANKS)&&e.default.createElement(\"span\",null,\"Ранг\")),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list\"},this.getMembers().map(function(l,o){return e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block\",key:o},e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block__id\"},l.id),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block__name\"},l.lastSeen?\"\":\"• \",\" \",l.name,l.lastSeen?\" [\".concat(s.systemUtil.timeStampString(l.lastSeen),\"]\"):\"\"),i.props.rights.includes(r.FRACTION_RIGHTS.WARNS)?e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block__rebuke\"},e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block__rebuke-minus\",onClick:function(){return i.changeWarns(l.id,!1)}},\"-\"),l.warns,e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block__rebuke-plus\",onClick:function(){return i.changeWarns(l.id,!0)}},\"+\")):e.default.createElement(\"div\",null),i.props.rights.includes(r.FRACTION_RIGHTS.CHANGE_RANKS)?e.default.createElement(\"div\",{className:(0,n.default)(\"tablet-fraction-userlist-list-block-rank\",{\"tablet-fraction-userlist-list-block-rank__active\":o===i.state.chooseRankId}),onClick:function(){return i.chooseRank(o)}},e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block-rank__name\",onClick:function(){return i.chooseRankClose(o)}},a.fractionCfg.getRankName(i.props.fractionId,l.rank),e.default.createElement(\"img\",{src:t.default.back,alt:\"\"})),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block-rank-list\"},a.fractionCfg.getFraction(i.props.fractionId).ranks.map(function(t,r){if(!a.fractionCfg.isLeader(i.props.fractionId,r+1))return e.default.createElement(\"div\",{key:r,onClick:function(){return i.changeRank(l.id,r)}},t)}))):e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block-text\"},a.fractionCfg.getRankName(i.props.fractionId,l.rank)),e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block-more\",onClick:function(){return i.changeShowSubMenu(l.id)}},e.default.createElement(\"img\",{src:t.default[\"ellipsis-vertical\"],alt:\"\"}),i.state.showSubMenu===l.id&&e.default.createElement(\"div\",{className:\"tablet-fraction-userlist-list-block-more__list\"},i.props.rights.includes(r.FRACTION_RIGHTS.KICK)&&e.default.createElement(\"div\",{onClick:function(){return i.kickMember(l.id)}},\"Уволить\"),i.props.rights.includes(r.FRACTION_RIGHTS.AWARDS)&&e.default.createElement(\"div\",{onClick:function(){return i.giveAward(l.id)}},\"Выдать премию\"))))}))))}}]),u}();"},"sourceMaps":null,"error":null,"hash":"8d4a84c35146590c9b777f1c76557cb5","cacheData":{"env":{}}}