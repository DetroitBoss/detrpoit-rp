{"id":"nr26","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":18,"index":18},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\PayBox.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"./assets/paybox.less","loc":{"line":2,"column":7,"index":35},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\PayBox.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\assets\\paybox.less"},{"name":"./assets/cash.svg","loc":{"line":3,"column":17,"index":77},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\PayBox.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\assets\\cash.svg"},{"name":"./assets/card.svg","loc":{"line":4,"column":17,"index":116},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\PayBox.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\assets\\card.svg"},{"name":"../../modules/CEF","loc":{"line":5,"column":20,"index":158},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\PayBox.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\CEF.ts"},{"name":"../../../shared/pay","loc":{"line":6,"column":24,"index":204},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\PayBox.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\pay.ts"},{"name":"../../modules/system","loc":{"line":7,"column":23,"index":251},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\PayBox\\PayBox.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\system.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.PayBox=void 0;var e=s(require(\"react\"));require(\"./assets/paybox.less\");var t=s(require(\"./assets/cash.svg\")),r=s(require(\"./assets/card.svg\")),a=require(\"../../modules/CEF\"),n=require(\"../../../shared/pay\"),o=require(\"../../modules/system\");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function f(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,d(a.key),a)}}function y(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function d(e){var t=m(e,\"string\");return\"symbol\"===l(t)?t:String(t)}function m(e,t){if(\"object\"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||\"default\");if(\"object\"!==l(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function b(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=g();return function(){var r,a=O(e);if(t){var n=O(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&(\"object\"===l(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return E(e)}function E(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function g(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=exports.PayBox=function(s){b(u,e.default.Component);var l=v(u);function u(t){var r;return p(this,u),(r=l.call(this,t)).inputPass=function(e){e.length>=5||r.setState(function(t){return c(c({},t),{},{password:e})})},r.sendPay=function(e){return r.state.select===n.PayType.CASH&&a.CEF.user.money<e?(r.setState(c(c({},r.state),{},{error:\"Недостаточно средств\",errorType:1})),null):r.state.select===n.PayType.CARD&&a.CEF.user.bank<e?(r.setState(c(c({},r.state),{},{error:\"Недостаточно средств\",errorType:1})),null):r.state.select===n.PayType.CARD&&r.state.password.length<4?(r.setState(c(c({},r.state),{},{error:\"Введите PIN-код\",errorType:1})),null):0===e?(r.setState(c(c({},r.state),{},{error:\"Выберите количество товара\",errorType:1})),null):(r.setState(c(c({},r.state),{},{error:\"\",errorType:0})),{paytype:r.state.select})},r.canPay=function(e){return r.state.select===n.PayType.CASH&&a.CEF.user.money<e?(r.setState(c(c({},r.state),{},{error:\"Недостаточно средств\",errorType:1})),null):r.state.select===n.PayType.CARD&&a.CEF.user.bank<e?(r.setState(c(c({},r.state),{},{error:\"Недостаточно средств\",errorType:1})),null):r.state.select===n.PayType.CARD&&r.state.password.length<4?(r.setState(c(c({},r.state),{},{error:\"Введите PIN-код\",errorType:1})),null):0===e?(r.setState(c(c({},r.state),{},{error:\"Выберите количество товара\",errorType:1})),null):(r.setState(c(c({},r.state),{},{error:\"\",errorType:0})),{paytype:r.state.select,pin:r.state.password})},r.getError=function(e){r.setState(c(c({},r.state),{},{error:e,errorType:1}))},r.getPass=function(){for(var t=[],a=0;a<4;a++)r.state.password&&r.state.password.length>a?t.push(r.state.password[a]):t.push(null);return e.default.createElement(\"div\",{className:\"paybox_pass\"},t.map(function(t,r){return e.default.createElement(\"p\",{key:r,className:\"paybox_pass_k \".concat(t?\"\":\"paybox_pass_n\")},\"*\")}))},r.state={select:0,password:\"\",errorType:0,error:\"\"},r}return y(u,[{key:\"render\",value:function(){var s=this;return e.default.createElement(e.default.Fragment,null,e.default.createElement(\"h1\",{className:\"paybox_h1\"},this.props.sum?\"$\".concat(o.system.numberFormat(this.props.sum)):e.default.createElement(e.default.Fragment,null,\"Способы оплаты\")),e.default.createElement(\"div\",{className:\"paybox_main\"},e.default.createElement(\"div\",{className:\"paybox_item \".concat(this.state.select===n.PayType.CASH?\"paybox_select\":\"\"),onClick:function(){return s.setState(c(c({},s.state),{},{select:n.PayType.CASH,error:null,password:\"\",errorType:0}))}},e.default.createElement(\"img\",{src:t.default}),e.default.createElement(\"div\",null,e.default.createElement(\"h2\",null,\"Наличные\"),e.default.createElement(\"input\",{value:\"$\".concat(a.CEF.user.money),readOnly:!0}))),a.CEF.user.bank?e.default.createElement(\"div\",{className:\"paybox_item \".concat(this.state.select===n.PayType.CARD?\"paybox_select\":\"\"),onClick:function(){return s.setState(c(c({},s.state),{},{select:n.PayType.CARD,error:\"\",password:\"\",errorType:0}))}},e.default.createElement(\"img\",{src:r.default}),e.default.createElement(\"div\",null,e.default.createElement(\"h2\",null,(!this.state.password||this.state.password.length<4)&&this.state.select===n.PayType.CARD?\"Введите PIN-код\":\"Моя карта\"),this.state.select===n.PayType.CARD?e.default.createElement(e.default.Fragment,null,this.getPass(),e.default.createElement(\"input\",{className:\"paybox_input\",value:this.state.password,autoFocus:!0,pattern:\"[0-9]{4}\",onChange:function(e){return s.inputPass(e.target.value)}})):e.default.createElement(\"input\",{value:\"$\".concat(a.CEF.user.bank),readOnly:!0}))):null,a.CEF.user.fractionCfg&&a.CEF.user.fractionCfg.gos&&this.props.allowCompany?e.default.createElement(\"div\",{className:\"paybox_item \".concat(this.state.select===n.PayType.COMPANY?\"paybox_select\":\"\"),onClick:function(){return s.setState(c(c({},s.state),{},{select:n.PayType.COMPANY,error:null,password:\"\",errorType:0}))}},e.default.createElement(\"img\",{src:r.default}),e.default.createElement(\"div\",null,e.default.createElement(\"h2\",{className:\"companyCount\"},\"Счет компании\"))):null),this.state.error?e.default.createElement(\"div\",{className:\"pay-fail\"},e.default.createElement(\"h1\",{className:\"paybox_error \".concat(0===this.state.errorType?\"pbe_info\":\"\")},this.state.error)):null)}}]),u}();"},"sourceMaps":null,"error":null,"hash":"91f247f74619d742d1209f42f35408ab","cacheData":{"env":{}}}