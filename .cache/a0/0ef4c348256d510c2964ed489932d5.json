{"id":"FrPm","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":18,"index":18},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"./assets/pers.less","loc":{"line":2,"column":7,"index":35},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\pers.less"},{"name":"./config","loc":{"line":3,"column":42,"index":100},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\config.ts"},{"name":"./assets/mouser.svg","loc":{"line":4,"column":19,"index":132},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\mouser.svg"},{"name":"./assets/arrow.svg","loc":{"line":5,"column":18,"index":174},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\arrow.svg"},{"name":"./assets/random.svg","loc":{"line":6,"column":19,"index":216},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\random.svg"},{"name":"./assets/*.svg","loc":{"line":7,"column":16,"index":256},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\*.svg"},{"name":"./assets/man.svg","loc":{"line":8,"column":16,"index":291},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\man.svg"},{"name":"./assets/woman.svg","loc":{"line":9,"column":18,"index":330},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\woman.svg"},{"name":"./assets/parents/*.png","loc":{"line":10,"column":20,"index":373},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\parents\\*.png"},{"name":"./assets/hairs/female/*.jpg","loc":{"line":11,"column":19,"index":419},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\hairs\\female\\*.jpg"},{"name":"./assets/hairs/male/*.jpg","loc":{"line":12,"column":19,"index":470},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\assets\\hairs\\male\\*.jpg"},{"name":"./Slider","loc":{"line":13,"column":35,"index":535},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Slider.tsx"},{"name":"../../modules/CEF","loc":{"line":14,"column":20,"index":568},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\CEF.ts"},{"name":"../../modules/custom.event","loc":{"line":15,"column":28,"index":618},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\Personage\\Personage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\custom.event.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Personage=void 0;var e=h(require(\"react\"));require(\"./assets/pers.less\");var t=y(require(\"./config\")),r=h(require(\"./assets/mouser.svg\")),a=h(require(\"./assets/arrow.svg\")),n=h(require(\"./assets/random.svg\")),o=h(require(\"./assets/*.svg\")),s=h(require(\"./assets/man.svg\")),l=h(require(\"./assets/woman.svg\")),c=h(require(\"./assets/parents/*.png\")),u=h(require(\"./assets/hairs/female/*.jpg\")),i=h(require(\"./assets/hairs/male/*.jpg\")),f=require(\"./Slider\"),p=require(\"../../modules/CEF\"),d=require(\"../../modules/custom.event\");function m(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(\"default\"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}function h(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function E(){E=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o=\"function\"==typeof Symbol?Symbol:{},s=o.iterator||\"@@iterator\",l=o.asyncIterator||\"@@asyncIterator\",c=o.toStringTag||\"@@toStringTag\";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},\"\")}catch(e){u=function(e,t,r){return e[t]=r}}function i(e,t,r,a){var o=t&&t.prototype instanceof _?t:_,s=Object.create(o.prototype),l=new x(a||[]);return n(s,\"_invoke\",{value:S(e,r,l)}),s}function f(e,t,r){try{return{type:\"normal\",arg:e.call(t,r)}}catch(e){return{type:\"throw\",arg:e}}}t.wrap=i;var p=\"suspendedStart\",d=\"suspendedYield\",m=\"executing\",y=\"completed\",h={};function _(){}function v(){}function R(){}var b={};u(b,s,function(){return this});var O=Object.getPrototypeOf,C=O&&O(O(F([])));C&&C!==r&&a.call(C,s)&&(b=C);var A=R.prototype=_.prototype=Object.create(b);function P(e){[\"next\",\"throw\",\"return\"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function r(n,o,s,l){var c=f(e[n],e,o);if(\"throw\"!==c.type){var u=c.arg,i=u.value;return i&&\"object\"==g(i)&&a.call(i,\"__await\")?t.resolve(i.__await).then(function(e){r(\"next\",e,s,l)},function(e){r(\"throw\",e,s,l)}):t.resolve(i).then(function(e){u.value=e,s(u)},function(e){return r(\"throw\",e,s,l)})}l(c.arg)}var o;n(this,\"_invoke\",{value:function(e,a){function n(){return new t(function(t,n){r(e,a,t,n)})}return o=o?o.then(n,n):n()}})}function S(t,r,a){var n=p;return function(o,s){if(n===m)throw new Error(\"Generator is already running\");if(n===y){if(\"throw\"===o)throw s;return{value:e,done:!0}}for(a.method=o,a.arg=s;;){var l=a.delegate;if(l){var c=L(l,a);if(c){if(c===h)continue;return c}}if(\"next\"===a.method)a.sent=a._sent=a.arg;else if(\"throw\"===a.method){if(n===p)throw n=y,a.arg;a.dispatchException(a.arg)}else\"return\"===a.method&&a.abrupt(\"return\",a.arg);n=m;var u=f(t,r,a);if(\"normal\"===u.type){if(n=a.done?y:d,u.arg===h)continue;return{value:u.arg,done:a.done}}\"throw\"===u.type&&(n=y,a.method=\"throw\",a.arg=u.arg)}}}function L(t,r){var a=r.method,n=t.iterator[a];if(n===e)return r.delegate=null,\"throw\"===a&&t.iterator.return&&(r.method=\"return\",r.arg=e,L(t,r),\"throw\"===r.method)||\"return\"!==a&&(r.method=\"throw\",r.arg=new TypeError(\"The iterator does not provide a '\"+a+\"' method\")),h;var o=f(n,t.iterator,r.arg);if(\"throw\"===o.type)return r.method=\"throw\",r.arg=o.arg,r.delegate=null,h;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,\"return\"!==r.method&&(r.method=\"next\",r.arg=e),r.delegate=null,h):s:(r.method=\"throw\",r.arg=new TypeError(\"iterator result is not an object\"),r.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(k,this),this.reset(!0)}function F(t){if(t||\"\"===t){var r=t[s];if(r)return r.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(a.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(g(t)+\" is not iterable\")}return v.prototype=R,n(A,\"constructor\",{value:R,configurable:!0}),n(R,\"constructor\",{value:v,configurable:!0}),v.displayName=u(R,c,\"GeneratorFunction\"),t.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===v||\"GeneratorFunction\"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,R):(e.__proto__=R,u(e,c,\"GeneratorFunction\")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},P(w.prototype),u(w.prototype,l,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,a,n,o){void 0===o&&(o=Promise);var s=new w(i(e,r,a,n),o);return t.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},P(A),u(A,c,\"Generator\"),u(A,s,function(){return this}),u(A,\"toString\",function(){return\"[object Generator]\"}),t.keys=function(e){var t=Object(e),r=[];for(var a in t)r.push(a);return r.reverse(),function e(){for(;r.length;){var a=r.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=F,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)\"t\"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(a,n){return l.type=\"throw\",l.arg=t,r.next=a,n&&(r.method=\"next\",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],l=s.completion;if(\"root\"===s.tryLoc)return n(\"end\");if(s.tryLoc<=this.prev){var c=a.call(s,\"catchLoc\"),u=a.call(s,\"finallyLoc\");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error(\"try statement without catch or finally\");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,\"finallyLoc\")&&this.prev<n.finallyLoc){var o=n;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,h):this.complete(s)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if(\"throw\"===a.type){var n=a.arg;N(r)}return n}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,r,a){return this.delegate={iterator:F(t),resultName:r,nextLoc:a},\"next\"===this.method&&(this.arg=e),h}},t}function _(e,t,r,a,n,o,s){try{var l=e[o](s),c=l.value}catch(u){return void r(u)}l.done?t(c):Promise.resolve(c).then(a,n)}function v(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var o=e.apply(t,r);function s(e){_(o,a,n,s,l,\"next\",e)}function l(e){_(o,a,n,s,l,\"throw\",e)}s(void 0)})}}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function A(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,w(a.key),a)}}function P(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function w(e){var t=S(e,\"string\");return\"symbol\"===g(t)?t:String(t)}function S(e,t){if(\"object\"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||\"default\");if(\"object\"!==g(a))return a;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}function L(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=I();return function(){var r,a=M(e);if(t){var n=M(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&(\"object\"===g(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return F(e)}function F(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function I(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D,j,B,H,T=[i.default,u.default],Y=[o.default.nose,o.default.forehead,o.default.eye,o.default.chin],G=[o.default.hair,o.default.brow,o.default.beard],K=[o.default.parents,o.default.dnk,o.default.face,o.default.body,o.default.clothe,o.default.next];!function(e){e[e.PAGE_PARENTS=0]=\"PAGE_PARENTS\",e[e.PAGE_FACE=1]=\"PAGE_FACE\",e[e.PAGE_HAIR=2]=\"PAGE_HAIR\",e[e.PAGE_BODY=3]=\"PAGE_BODY\",e[e.PAGE_CLOTHES=4]=\"PAGE_CLOTHES\"}(D||(D={})),function(e){e[e.NOSE=0]=\"NOSE\",e[e.FOREHEAD=1]=\"FOREHEAD\",e[e.EYE=2]=\"EYE\",e[e.CHIN=3]=\"CHIN\"}(j||(j={})),function(e){e[e.HAIR=0]=\"HAIR\",e[e.BROWS=1]=\"BROWS\",e[e.BEARD=2]=\"BEARD\"}(B||(B={})),function(e){e[e.COLOR_EYE=0]=\"COLOR_EYE\",e[e.BROW=1]=\"BROW\",e[e.BROWOPACITY=2]=\"BROWOPACITY\",e[e.COLOR_BROWS=3]=\"COLOR_BROWS\",e[e.BEARD=4]=\"BEARD\",e[e.BEARDOPACITY=5]=\"BEARDOPACITY\",e[e.COLOR_BEARD=6]=\"COLOR_BEARD\",e[e.HAIR=7]=\"HAIR\",e[e.COLOR_HAIR1=8]=\"COLOR_HAIR1\",e[e.COLOR_HAIR2=9]=\"COLOR_HAIR2\",e[e.FRECKLES=10]=\"FRECKLES\",e[e.FRECKLESOPACITY=11]=\"FRECKLESOPACITY\",e[e.COLOR_FRECKLES=12]=\"COLOR_FRECKLES\",e[e.MAKEUP=13]=\"MAKEUP\",e[e.MAKEUP_COLOR=14]=\"MAKEUP_COLOR\"}(H||(H={}));var W=t.default.face,q=t.default.features,U=t.default.hair,J=t.default.eyebrows,z=t.default.freckles,Z=t.default.beard,$=t.default.clothes,Q=t.default.makeup,V=exports.Personage=function(r){L(o,e.default.Component);var a=N(o);function o(e){var r;return C(this,o),(r=a.call(this,e)).setSex=function(e){mp.trigger(\"client:user:personage:eventManager\",\"floor\",e),r.setState({player:b(b({},r.state.player),{},{sex:e}),hair:0,hairColor:0,hairColor2:0,eyebrows:0,eyebrowsColor:0,eyebrowOpacity:.5,eyeColor:0,freckles:0,frecklesColor:0,frecklesOpacity:.1,beard:0,beardColor:0,beardOpacity:.5,pomade:0,pomadeColor:0,blush:0,blushColor:0,makeup:0,makeupColor:0,clothe:[0,0,0],clotheId:[0,0,0]},function(){r.loadDress()})},r.confirm=v(E().mark(function e(){return E().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.CEF.user.name||!(r.state.player.name.length<2||r.state.player.family.length<2)){e.next=2;break}return e.abrupt(\"return\",r.setState(b(b({},r.state),{},{player:b(b({},r.state.player),{},{nameError:r.state.player.name.length<2?\"Короткое имя\":null,familyError:r.state.player.family.length<2?\"Короткая фамилия\":null})})));case 2:if(p.CEF.user.name||r.state.player.name.charAt(0).toLowerCase()!=r.state.player.name.charAt(0)&&r.state.player.family.charAt(0).toLowerCase()!=r.state.player.family.charAt(0)){e.next=4;break}return e.abrupt(\"return\",r.setState(b(b({},r.state),{},{player:b(b({},r.state.player),{},{nameError:r.state.player.name.charAt(0).toLowerCase()==r.state.player.name.charAt(0)?\"Имя должно начинаться с большой буквы\":null,familyError:r.state.player.family.charAt(0).toLowerCase()==r.state.player.family.charAt(0)?\"Фамилия должна начинаться с большой буквы\":null})})));case 4:if(e.t0=!p.CEF.user.name,!e.t0){e.next=9;break}return e.next=8,d.CustomEvent.callServer(\"server:user:personage:checkName\",r.state.player.name,r.state.player.family);case 8:e.t0=e.sent;case 9:if(!e.t0){e.next=11;break}return e.abrupt(\"return\",r.setState(b(b({},r.state),{},{player:b(b({},r.state.player),{},{nameError:\"Имя и фамилия уже зарегистрированы\",familyError:\"Имя и фамилия уже зарегистрированы\"})})));case 11:mp.trigger(\"client:user:personage:eventManager\",\"save\",0,r.state.player.name,r.state.player.family,p.CEF.user.name?0:r.state.player.age,p.CEF.user.name?null:JSON.stringify(r.state.clotheId),r.state.player.promo);case 12:case\"end\":return e.stop()}},e)})),r.random=function(){r.setHeredity(t.Ranges.heredity[0]+Math.random()*(t.Ranges.heredity[1]-t.Ranges.heredity[0])),r.state.features.map(function(e,a){return r.setFeatures(a,t.Ranges.features[0]+Math.random()*(t.Ranges.features[1]-t.Ranges.features[0]),a!==r.state.features.length-1)}),r.setParent(0,t.Ranges.face[0][0]+Math.floor(Math.random()*(t.Ranges.face[0][1]-t.Ranges.face[0][0]))),r.setParent(1,t.Ranges.face[1][0]+Math.floor(Math.random()*(t.Ranges.face[1][1]-t.Ranges.face[1][0]))),r.setParam(H.HAIR,t.Ranges.hair[r.state.player.sex][0]+Math.floor(Math.random()*(t.Ranges.hair[r.state.player.sex][1]-t.Ranges.hair[r.state.player.sex][0]))),r.setParam(H.BROW,t.Ranges.eyebrows[0]+Math.floor(Math.random()*(t.Ranges.eyebrows[1]-t.Ranges.eyebrows[0]))),r.setParam(H.BEARD,t.Ranges.beard[0]+Math.floor(Math.random()*(t.Ranges.beard[1]-t.Ranges.beard[0]))),r.setParam(H.FRECKLES,t.Ranges.freckles[0]+Math.floor(Math.random()*(t.Ranges.freckles[1]-t.Ranges.freckles[0]))),r.setParam(H.BROWOPACITY,t.Ranges.opacity[0]+Math.floor(Math.random()*(t.Ranges.opacity[1]-t.Ranges.opacity[0]))),r.setParam(H.FRECKLESOPACITY,t.Ranges.opacity[0]+Math.floor(Math.random()*(t.Ranges.opacity[1]-t.Ranges.opacity[0]))),r.setParam(H.BEARDOPACITY,t.Ranges.opacity[0]+Math.floor(Math.random()*(t.Ranges.opacity[1]-t.Ranges.opacity[0]))),r.setParam(H.COLOR_HAIR1,t.Ranges.colors[0]+Math.floor(Math.random()*(t.Ranges.colors[1]-t.Ranges.colors[0]))),r.setParam(H.COLOR_HAIR2,t.Ranges.colors[0]+Math.floor(Math.random()*(t.Ranges.colors[1]-t.Ranges.colors[0]))),r.setParam(H.COLOR_EYE,t.Ranges.colors[0]+Math.floor(Math.random()*(t.Ranges.colors[1]-t.Ranges.colors[0]))),r.setParam(H.COLOR_BROWS,t.Ranges.colors[0]+Math.floor(Math.random()*(t.Ranges.colors[1]-t.Ranges.colors[0]))),r.setParam(H.COLOR_BEARD,t.Ranges.colors[0]+Math.floor(Math.random()*(t.Ranges.colors[1]-t.Ranges.colors[0]))),r.setParam(H.COLOR_FRECKLES,t.Ranges.colors[0]+Math.floor(Math.random()*(t.Ranges.colors[1]-t.Ranges.colors[0])))},r.inputName=function(e){return r.setState(b(b({},r.state),{},{player:b(b({},r.state.player),{},{focus:e,nameError:0===e?null:r.state.player.nameError,familyError:1===e?null:r.state.player.familyError})}))},r.setName=function(e,t){t.target.value.match(/^[a-zA-Z]{0,20}$/i)&&(e?r.setState({player:b(b({},r.state.player),{},{family:t.target.value})}):r.setState({player:b(b({},r.state.player),{},{name:t.target.value})}))},r.setAge=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=Math.max(t.Ranges.age[0],e),e=Math.min(t.Ranges.age[1],e)),mp.trigger(\"client:user:personage:setAge\",e),r.setState({player:b(b({},r.state.player),{},{age:e})})},r.setPromo=function(e){r.setState({player:b(b({},r.state.player),{},{promo:e?e.toUpperCase():e})})},r.setPage=function(e){if(K.length-1===e)return r.confirm();r.setState(b(b({},r.state),{},{page:e,subpage:0}))},r.setSubPage=function(e){return r.setState(b(b({},r.state),{},{subpage:e}))},r.setItem=function(e){return r.setState(b(b({},r.state),{},{item:e}))},r.setParent=function(e,t){mp.trigger(\"client:user:personage:eventManager\",e?\"mother\":\"father\",W[e][t]),r.setState(function(r){return r.face[e]=t,b({},r)})},r.setHeredity=function(e){mp.trigger(\"client:user:personage:eventManager\",\"heredity\",e),mp.trigger(\"client:user:personage:eventManager\",\"skin\",e),r.setState(function(){return{heredity:e,skin:e}})},r.setFeatures=function(e,t,a){r.setState(function(r){return r.features[e]=t,a||mp.trigger(\"client:user:personage:eventManager\",\"features\",JSON.stringify(r.features)),b({},r)})},r.setAppearance=function(e,t){mp.trigger(\"client:user:personage:eventManager\",e,t)},r.setClothes=function(e,t,a,n){r.setState(function(e){return e.clothe[t]=a,e.clotheId[t]=n,e});var o=r.state.dress.filter(function(t){return t.category===e})[a];d.CustomEvent.triggerClient(\"cloth:preview\",JSON.stringify(o.data))},r.setParam=function(e,t){switch(e){case H.HAIR:return r.setState(function(e){return b(b({},e),{},{hair:t})}),r.setAppearance(\"hair\",U[r.state.player.sex][t]);case H.COLOR_HAIR1:return r.setState(function(e){return b(b({},e),{},{hairColor:t})}),r.setAppearance(\"hairColor\",t);case H.COLOR_HAIR2:return r.setState(function(e){return b(b({},e),{},{hairColor2:t})}),r.setAppearance(\"hairColor2\",t);case H.COLOR_EYE:return r.setState(function(e){return b(b({},e),{},{eyeColor:t})}),r.setAppearance(\"eyeColor\",t);case H.BROWOPACITY:return r.setState(function(e){return b(b({},e),{},{eyebrowOpacity:t})}),r.setAppearance(\"eyebrowsOpacity\",t);case H.BROW:return r.setState(function(e){return b(b({},e),{},{eyebrows:t})}),r.setAppearance(\"eyebrows\",t);case H.COLOR_BROWS:return r.setState(function(e){return b(b({},e),{},{eyebrowsColor:t})}),r.setAppearance(\"eyebrowsColor\",t);case H.BEARD:return r.setState(function(e){return b(b({},e),{},{beard:t})}),r.setAppearance(\"beard\",t);case H.BEARDOPACITY:return r.setState(function(e){return b(b({},e),{},{beardOpacity:t})}),r.setAppearance(\"beardOpacity\",t);case H.COLOR_BEARD:return r.setState(function(e){return b(b({},e),{},{beardColor:t})}),r.setAppearance(\"beardColor\",t);case H.FRECKLES:return r.setState(function(e){return b(b({},e),{},{freckles:t})}),r.setAppearance(\"freckles\",t);case H.FRECKLESOPACITY:return r.setState(function(e){return b(b({},e),{},{frecklesOpacity:t})}),r.setAppearance(\"frecklesOpacity\",t);case H.COLOR_FRECKLES:return r.setState(function(e){return b(b({},e),{},{frecklesColor:t})}),r.setAppearance(\"frecklesColor\",t);case H.MAKEUP:return r.setState(function(e){return b(b({},e),{},{makeup:t})}),r.setAppearance(\"makeup\",t);case H.MAKEUP_COLOR:return r.setState(function(e){return b(b({},e),{},{makeupColor:t})}),r.setAppearance(\"makeupColor\",t)}},r.state={dress:[],player:{sex:0,name:\"\",family:\"\",nameError:null,familyError:null,age:t.Ranges.age[0],focus:-1,promo:\"\"},page:D.PAGE_PARENTS,subpage:0,item:0,floor:0,face:[0,0],skin:.5,heredity:.5,features:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],hair:0,hairColor:0,hairColor2:0,eyebrows:0,eyebrowOpacity:.5,eyebrowsColor:0,eyeColor:0,freckles:0,frecklesColor:0,frecklesOpacity:.1,beard:0,beardColor:0,beardOpacity:.5,pomade:0,pomadeColor:0,blush:0,blushColor:0,makeup:0,makeupColor:0,clothe:[0,0,0],clotheId:[0,0,0]},setTimeout(function(){r.loadDress()},1e3),p.CEF.user.name||p.CEF.playSound(\"createpersonageonyx\"),r}return P(o,[{key:\"loadDress\",value:function(){var e=this;p.CEF.getDressPersonage(this.state.player.sex?0:1).then(function(t){e.setState({dress:t,clothe:[0,0,0],clotheId:[t.find(function(e){return e.category===$[0].category})?t.find(function(e){return e.category===$[0].category}).id:0,t.find(function(e){return e.category===$[1].category})?t.find(function(e){return e.category===$[1].category}).id:0,t.find(function(e){return e.category===$[2].category})?t.find(function(e){return e.category===$[2].category}).id:0]},function(){e.reloadDress()})})}},{key:\"reloadDress\",value:function(){var e=this;if(this.state.clotheId[0]){var t=this.state.dress.find(function(t){return t.id===e.state.clotheId[0]});d.CustomEvent.triggerClient(\"cloth:preview\",JSON.stringify(t.data))}if(this.state.clotheId[1]){var r=this.state.dress.find(function(t){return t.id===e.state.clotheId[1]});d.CustomEvent.triggerClient(\"cloth:preview\",JSON.stringify(r.data))}if(this.state.clotheId[2]){var a=this.state.dress.find(function(t){return t.id===e.state.clotheId[1]});d.CustomEvent.triggerClient(\"cloth:preview\",JSON.stringify(a.data))}}},{key:\"render\",value:function(){var t=this;return e.default.createElement(\"div\",{className:\"pers_main\"},se(this.state.player,this.setSex,this.setName,this.inputName,this.setAge,this.setPromo),e.default.createElement(\"div\",{className:\"pers_custom\"},e.default.createElement(\"div\",{className:\"pers_random\",onClick:this.random},e.default.createElement(\"img\",{src:n.default}),e.default.createElement(\"p\",null,\"Случайно\")),e.default.createElement(\"div\",{className:\"pers_box\"},e.default.createElement(\"div\",{className:\"pers_box_right\"},K.map(function(r,a){return e.default.createElement(\"div\",{onClick:function(){return t.setPage(a)},key:a,className:\"pers_page \".concat(t.state.page===a?\"pers_page_select\":\"\",\" \").concat(a===K.length-1?\"pers_page_accept\":\"\")},e.default.createElement(\"img\",{src:r}))})),e.default.createElement(\"div\",{className:\"pers_box_left\"},oe(this.state,this.setItem,this.setParent,this.setHeredity),re(this.state,this.setSubPage,this.setFeatures,this.setParam),te(this.state,this.setSubPage,this.setParam),ee(this.state,this.setParam),this.PageDataClothes()))))}},{key:\"PageDataClothes\",value:function(){var t=this;return this.state.page!=D.PAGE_CLOTHES?null:e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"pers_box_body\"},$.map(function(r,a){var n=t.state.dress.filter(function(e){return e.category===r.category});return n.length?e.default.createElement(\"div\",{key:\"dress_create_pers_\".concat(a)},le(\"\".concat(r.name).concat(n[t.state.clothe[a]]?\" (\".concat(n[t.state.clothe[a]].name,\")\"):\"\"),n[t.state.clothe[a]]?t.state.clothe[a]:0,1,0,n.length-1,function(e){t.setClothes(r.category,a,e,n[e].id)})):e.default.createElement(e.default.Fragment,null)})))}}]),o}(),X=function(r,a,n,o){return e.default.createElement(\"div\",{className:\"pers_box_color \".concat(o.length>1?\"pers_box_color_ex\":\"\")},e.default.createElement(\"div\",{className:\"pers_box_color_box \".concat(o.length>1?\"pers_box_color_ex\":\"\")},e.default.createElement(\"p\",null,\"Основной цвет\"),t.colors.map(function(t,a){return e.default.createElement(\"div\",{onClick:function(){return n(r[0],a)},key:a,className:\"pers_box_color_item \".concat(o[0]===a?\"color_item_select\":\"\"),style:{backgroundColor:t}})})),o.length>1?e.default.createElement(\"div\",{className:\"pers_box_color_box \".concat(o.length>1?\"pers_box_color_ex\":\"\")},e.default.createElement(\"p\",null,\"Дополнительный цвет\"),t.colors.map(function(t,a){return e.default.createElement(\"div\",{onClick:function(){return n(r[1],a)},key:a,className:\"pers_box_color_item \".concat(o[1]===a?\"color_item_select\":\"\"),style:{backgroundColor:t}})})):null)},ee=function(r,a){return r.page!=D.PAGE_BODY?null:e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"pers_box_body\"},le(\"Веснушки\",r.freckles,1,0,z,function(e){return a(H.FRECKLES,e)}),e.default.createElement(\"div\",null,(0,f.AddSlider)(f.sliders.SLIDER_PARAM,r.frecklesOpacity,.01,t.Ranges.opacity[0],t.Ranges.opacity[1],function(e){return a(H.FRECKLESOPACITY,e)}),e.default.createElement(\"p\",{className:\"pers_p_with_border\"},\"Интенсивность веснушек\")),X([H.COLOR_FRECKLES],r,a,[r.frecklesColor])))},te=function(t,r,a){return t.page!=D.PAGE_HAIR?null:e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"pers_box_face\"},e.default.createElement(\"div\",{className:\"pers_face_type\"},G.map(function(a,n){return e.default.createElement(\"div\",{onClick:function(){return r(n)},key:n,className:\"pers_face_div \".concat(t.subpage===n?\"pers_face_select\":\"\")},e.default.createElement(\"img\",{src:a}))})),ae(t,a)),t.subpage===B.HAIR?X([H.COLOR_HAIR1,H.COLOR_HAIR2],t,a,[t.hairColor,t.hairColor2]):null)},re=function(t,r,a,n){return t.page!=D.PAGE_FACE?null:e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"pers_box_face\"},e.default.createElement(\"div\",{className:\"pers_face_type\"},Y.map(function(a,n){return e.default.createElement(\"div\",{onClick:function(){return r(n)},key:n,className:\"pers_face_div \".concat(t.subpage===n?\"pers_face_select\":\"\")},e.default.createElement(\"img\",{src:a}))})),e.default.createElement(\"div\",{className:\"pers_face_subtype\"},ne(t,a,n))))},ae=function(r,a){switch(r.subpage){case B.HAIR:return e.default.createElement(\"div\",{className:\"pers_hair_subtype\"},U[r.player.sex].map(function(t,n){return e.default.createElement(\"img\",{onClick:function(){return a(H.HAIR,n)},key:n,className:\"\".concat(r.hair===n?\"pers_parent_select\":\"\"),src:\"\".concat(T[r.player.sex][\"\".concat(0===r.player.sex?\"m\":\"f\").concat(U[r.player.sex][n])])})}));case B.BROWS:return e.default.createElement(\"div\",{className:\"pers_face_subtype\"},le(\"Вид бровей\",r.eyebrows,1,0,J,function(e){return a(H.BROW,e)}),e.default.createElement(\"div\",null,(0,f.AddSlider)(f.sliders.SLIDER_PARAM,r.eyebrowOpacity,.01,t.Ranges.opacity[0],t.Ranges.opacity[1],function(e){return a(H.BROWOPACITY,e)}),e.default.createElement(\"p\",{className:\"pers_p_with_border\"},\"Интенсивность бровей\")),X([H.COLOR_BROWS],r,a,[r.eyebrowsColor]));case B.BEARD:return 1===r.player.sex?e.default.createElement(\"div\",{className:\"pers_face_subtype\"},le(\"Вид макияжа\",r.makeup,1,0,Q,function(e){return a(H.MAKEUP,e)}),X([H.MAKEUP_COLOR],r,a,[r.makeupColor])):e.default.createElement(\"div\",{className:\"pers_face_subtype\"},le(\"Вид бороды\",r.beard,1,0,Z,function(e){return a(H.BEARD,e)}),e.default.createElement(\"div\",null,(0,f.AddSlider)(f.sliders.SLIDER_PARAM,r.beardOpacity,.01,t.Ranges.opacity[0],t.Ranges.opacity[1],function(e){return a(H.BEARDOPACITY,e)}),e.default.createElement(\"p\",{className:\"pers_p_with_border\"},\"Интенсивность бороды\")),X([H.COLOR_BEARD],r,a,[r.beardColor]))}},ne=function(r,a,n){switch(r.subpage){case j.NOSE:return e.default.createElement(e.default.Fragment,null,r.features.slice(0,6).map(function(n,o){return e.default.createElement(\"div\",{key:o},(0,f.AddSlider)(f.sliders.SLIDER_PARAM,r.features[o],.01,t.Ranges.features[0],t.Ranges.features[1],function(e){return a(o,e)}),e.default.createElement(\"p\",{className:\"pers_p_with_border\"},q[o]))}));case j.FOREHEAD:return e.default.createElement(e.default.Fragment,null,r.features.slice(6,11).map(function(n,o){return e.default.createElement(\"div\",{key:o},(0,f.AddSlider)(f.sliders.SLIDER_PARAM,r.features[o+6],.01,t.Ranges.features[0],t.Ranges.features[1],function(e){return a(o+6,e)}),e.default.createElement(\"p\",{className:\"pers_p_with_border\"},q[o+6]))}));case j.EYE:return e.default.createElement(e.default.Fragment,null,r.features.slice(11,12).map(function(o,s){return e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{key:s},(0,f.AddSlider)(f.sliders.SLIDER_PARAM,r.features[s+11],.01,t.Ranges.features[0],t.Ranges.features[1],function(e){return a(s+11,e)}),e.default.createElement(\"p\",{className:\"pers_p_with_border\"},q[s+11])),X([H.COLOR_EYE],r,n,[r.eyeColor]))}));case j.CHIN:return e.default.createElement(e.default.Fragment,null,r.features.slice(12,20).map(function(n,o){return e.default.createElement(\"div\",{key:o},(0,f.AddSlider)(f.sliders.SLIDER_PARAM,r.features[o+12],.01,t.Ranges.features[0],t.Ranges.features[1],function(e){return a(o+12,e)}),e.default.createElement(\"p\",{className:\"pers_p_with_border\"},q[o+12]))}))}},oe=function(r,a,n,o){return r.page!=D.PAGE_PARENTS?null:e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"pers_box_parent\"},e.default.createElement(\"div\",{className:\"pers_parent_type\"},e.default.createElement(\"div\",{onClick:function(){return a(0)},className:\"perent_div \".concat(0===r.item?\"perent_select\":\"\")},e.default.createElement(\"img\",{src:s.default})),e.default.createElement(\"div\",{className:\"perent_slider\"},e.default.createElement(\"p\",null,\"Схожесть\"),(0,f.AddSlider)(f.sliders.SLIDER_FLOOR,r.heredity,.01,t.Ranges.heredity[0],t.Ranges.heredity[1],o)),e.default.createElement(\"div\",{onClick:function(){return a(1)},className:\"perent_div \".concat(1===r.item?\"perent_select\":\"\")},e.default.createElement(\"img\",{src:l.default}))),e.default.createElement(\"div\",{className:\"pers_parent_face\"},W[r.item].map(function(t,a){return e.default.createElement(\"img\",{onClick:function(){return n(r.item,a)},key:a,className:\"\".concat(r.face[r.item]===a?\"pers_parent_select\":\"\"),src:\"\".concat(c.default[\"\".concat(0===r.item?\"male\":\"female\",\"_\").concat(a)])})}))))},se=function(n,o,s,l,c,u){return e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"pers_text\"},e.default.createElement(\"h2\",null,\"Создание Персонажа\")),e.default.createElement(\"div\",{className:\"pers_data\"},e.default.createElement(\"div\",{className:\"pers_sex\"},e.default.createElement(\"div\",{className:\"pers_female \".concat(n.sex?\"\":\" male_select\"),onClick:function(){return o(0)}}),e.default.createElement(\"div\",{className:\"pers_male \".concat(n.sex?\" male_select\":\"\"),onClick:function(){return o(1)}})),e.default.createElement(\"div\",{className:\"pers_sex_text\"},e.default.createElement(\"p\",null,\"Выберите пол\"),e.default.createElement(\"p\",null,\"вашего персонажа\")),p.CEF.user.name?e.default.createElement(e.default.Fragment,null):e.default.createElement(e.default.Fragment,null,e.default.createElement(\"div\",{className:\"pers_name \".concat(0==n.focus?\"pers_name_select\":\"\",\" \").concat(n.nameError?\"pers_name_error\":\"\",\" \").concat(p.CEF.user.name?\"pers_name_error\":\"\")},e.default.createElement(\"p\",null,\"Имя\"),e.default.createElement(\"input\",{readOnly:!!p.CEF.user.name,disabled:!!p.CEF.user.name,onFocus:function(){return l(0)},onBlur:function(){return l(-1)},placeholder:\"Name\",onChange:function(e){return s(0,e)},value:p.CEF.user.name?p.CEF.user.name.split(\" \")[0]:n.nameError?n.nameError:n.name})),e.default.createElement(\"div\",{className:\"pers_family \".concat(1==n.focus?\"pers_name_select\":\"\",\" \").concat(n.familyError?\"pers_name_error\":\"\",\"  \").concat(p.CEF.user.name?\"pers_name_error\":\"\")},e.default.createElement(\"p\",null,\"Фамилия\"),e.default.createElement(\"input\",{readOnly:!!p.CEF.user.name,disabled:!!p.CEF.user.name,onFocus:function(){return l(1)},onBlur:function(){return l(-1)},placeholder:\"Surname\",onChange:function(e){return s(1,e)},value:p.CEF.user.name?p.CEF.user.name.split(\" \")[1]:n.familyError?n.familyError:n.family})),e.default.createElement(\"div\",{className:\"pers_slider\"},e.default.createElement(\"p\",null,\"Возраст персонажа\"),(0,f.AddSlider)(f.sliders.SLIDER_AGE,n.age,1,t.Ranges.age[0],t.Ranges.age[1],c)),e.default.createElement(\"div\",{className:\"pers_family\"},e.default.createElement(\"p\",null,\"Промокод\"),e.default.createElement(\"input\",{placeholder:\"Promo\",onChange:function(e){return u(e.currentTarget.value)},value:n.promo}))),e.default.createElement(\"div\",{className:\"pers_help\"},e.default.createElement(\"div\",null,e.default.createElement(\"img\",{src:r.default}),e.default.createElement(\"img\",{className:\"pers_arrow\",src:a.default})),e.default.createElement(\"p\",null,\"Воспользуйтесь мышью для поворота персонажа\"))))},le=function(t,r,a,n,s,l){return e.default.createElement(\"div\",{className:\"pers_button_box\"},e.default.createElement(\"p\",null,t),e.default.createElement(\"div\",{onClick:function(){r>n&&l(r-a)},className:\"pers_button_key \".concat(r===n?\"\":\"pbk_active\")},e.default.createElement(\"img\",{src:o.default.btnkey})),e.default.createElement(\"div\",{onClick:function(){r<s&&l(r+a)},className:\"pers_button_key \".concat(r===s?\"\":\"pbk_active\")},e.default.createElement(\"img\",{src:o.default.btnkey,style:{transform:\"rotate(180deg)\"}})))};"},"sourceMaps":null,"error":null,"hash":"ea3723734a561cf79a67c9e3e3cb806d","cacheData":{"env":{}}}