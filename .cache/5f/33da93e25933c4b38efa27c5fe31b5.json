{"id":"SNxO","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"./arrays","loc":{"line":1,"column":60,"index":60},"parent":"D:\\DETROIT\\server\\src\\shared\\system.ts","resolved":"D:\\DETROIT\\server\\src\\shared\\arrays.ts"},{"name":"./quests","loc":{"line":2,"column":33,"index":106},"parent":"D:\\DETROIT\\server\\src\\shared\\system.ts","resolved":"D:\\DETROIT\\server\\src\\shared\\quests.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.systemUtil=void 0;var t=require(\"./arrays\"),e=require(\"./quests\");function n(t){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function i(t){var e=u(t,\"string\");return\"symbol\"==n(e)?e:e+\"\"}function u(t,e){if(\"object\"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||\"default\");if(\"object\"!=n(o))return o;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===e?String:Number)(t)}function c(t,e,n){t.z||(t.z=0),e.z||(e.z=0);var r=y.middlePoint3d(t,e),o=y.distanceToPos(t,e),a=(e.x-t.x)/o*(n/2),i=(e.y-t.y)/o*(n/2),u=(e.z-t.z)/o*(n/2);return[{x:r.x-a,y:r.y-i,z:r.z-u},{x:r.x+a,y:r.y+i,z:r.z+u}]}function l(t,e,n){\"number\"==typeof e&&(e=new mp.Vector3(0,0,e));var r=new mp.Vector3(e.x/180*Math.PI,e.y/180*Math.PI,e.z/180*Math.PI),o=Math.cos(r.x),a=Math.cos(r.y),i=Math.cos(r.z),u=Math.sin(r.x),c=Math.sin(r.y),l=Math.sin(r.z);return new mp.Vector3(t.x+n.x*a*i-n.x*u*c*l-n.y*o*l+n.z*c*i+n.z*u*a*l,t.y+n.x*a*l+n.x*u*c*i+n.y*o*i+n.z*c*l-n.z*u*a*i,t.z-n.x*o*c+n.y*u+n.z*o*a)}function s(t){return t*(Math.PI/180)}var y=exports.systemUtil=function(){return a(function t(){r(this,t)},null,[{key:\"round\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return+t.toFixed(e)}},{key:\"radian\",value:function(t){return\"number\"==typeof t?s(t):{x:s(t.x),y:s(t.y),z:s(t.z)}}},{key:\"insidePolygon\",value:function(t,e){for(var n=t[0],r=t[1],o=!1,a=0,i=e.length-1;a<e.length;i=a++){var u=e[a][0],c=e[a][1],l=e[i][0],s=e[i][1];c>r!=s>r&&n<(l-u)*(r-c)/(s-c)+u&&(o=!o)}return o}},{key:\"lerpVectors\",value:function(t,e,n){return new mp.Vector3(this.lerp(t.x,e.x,n),this.lerp(t.y,e.y,n),this.lerp(t.z,e.z,n))}},{key:\"lerp2d\",value:function(t,e,n){return{x:this.lerp(t.x,e.x,n),y:this.lerp(t.y,e.y,n)}}},{key:\"lerp\",value:function(t,e,n){return t+(e-t)*(n=(n=n<0?0:n)>1?1:n)}},{key:\"flatten\",value:function(t){var e=this;return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e.flatten(n):n)},[])}},{key:\"sortArray\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"DESC\";return t.sort(function(t,n){var r=0;return\"DESC\"!==e?t<n?r=-1:t>n&&(r=1):t<n?r=1:t>n&&(r=-1),r})}},{key:\"spliceArrayByArray\",value:function(t,e,n){n||(n=function(t,e){return t===e}),e.forEach(function(e){var r=t.findIndex(function(t){return n(t,e)});-1!==r&&t.splice(r)})}},{key:\"chunkArray\",value:function(t,e){return[].concat.apply([],t.map(function(n,r){return r%e?[]:[t.slice(r,r+e)]}))}},{key:\"sortArrayObjects\",value:function(t,e){return t.sort(function(t,n){var r=0;return e.map(function(e){if(0==r){var o=t[e.id],a=n[e.id];\"DESC\"!==e.type?o<a?r=-1:o>a&&(r=1):o<a?r=1:o>a&&(r=-1)}}),r})}},{key:\"filterInput\",value:function(t){return t?(\"string\"!=typeof t&&(t=String(t)),t.length?t=(t=(t=(t=t.toString().replace(/[^A-Za-zА-Яа-яЁёЇїІі0-9 \\-,.?/!%()$_*+=#№@;:<>{}\\[\\]]/g,\"\")).toString().replace(/<([^>]*)>?/gm,\"$1\")).toString().replace(/\"/g,\"\")).toString().replace(/'/g,\"\"):t):t}},{key:\"secondsToString\",value:function(t){var e=~~(t/3600),n=~~(t%3600/60),r=~~t%60,o=\"\";return e>0&&(o+=e+\":\"+(n<10?\"0\":\"\")),o+=n+\":\"+(r<10?\"0\":\"\"),o+=\"\"+r}},{key:\"msecondsToString\",value:function(t){var e=t%1e3;return\"\".concat(this.secondsToString(t-e)).concat(e?\":\".concat(e<10?\"0\":\"\").concat(e<100?\"0\":\"\").concat(e):\"000\")}},{key:\"componentToHex\",value:function(t){var e=t.toString(16);return 1==e.length?\"0\"+e:e}},{key:\"rgbToHex\",value:function(t,e,n){return\"#\"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(n)}},{key:\"hexToRgb\",value:function(t){var e=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},{key:\"encryptCodes\",value:function(t,e){for(var n=[],r=e.length,o=0;o<t.length;o++){var a=o%r,i=t.charCodeAt(o)+e.charCodeAt(a);n.push(i)}return JSON.stringify(n)}},{key:\"decryptCodes\",value:function(t,e){for(var n=[],r=\"\",o=JSON.parse(t),a=e.length,i=0;i<o.length;i++){var u=i%a,c=o[i]-e.charCodeAt(u);n.push(c)}for(i=0;i<n.length;i++){r+=String.fromCharCode(n[i])}return r}},{key:\"middlePoint2d\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{x:e.map(function(t){return t.x}).reduce(function(t,e){return t+e})/e.length,y:e.map(function(t){return t.y}).reduce(function(t,e){return t+e})/e.length}}},{key:\"middlePoint3d\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{x:e.map(function(t){return t.x}).reduce(function(t,e){return t+e})/e.length,y:e.map(function(t){return t.y}).reduce(function(t,e){return t+e})/e.length,z:e.map(function(t){return t.z}).reduce(function(t,e){return t+e})/e.length}}},{key:\"getTime\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new Date;return\"\".concat(this.digitFormat(e.getHours()),\":\").concat(this.digitFormat(e.getMinutes()),\":\").concat(this.digitFormat(e.getSeconds()))+(t?\":\".concat(this.digitFormat(e.getMilliseconds())):\"\")}},{key:\"fullDateTime\",get:function(){var t=new Date;return\"\".concat(this.digitFormat(t.getDate()),\".\").concat(this.digitFormat(t.getMonth()+1),\".\").concat(this.digitFormat(t.getFullYear()),\" \").concat(this.digitFormat(t.getHours()),\":\").concat(this.digitFormat(t.getMinutes()))}},{key:\"timeStampString\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date,r=new Date(1e3*t),o=\"\".concat(this.digitFormat(r.getHours()),\":\").concat(this.digitFormat(r.getMinutes()));return(e||n.getDate()!=r.getDate()||n.getMonth()!=r.getMonth()||n.getFullYear()!=r.getFullYear())&&(o=\"\".concat(this.digitFormat(r.getDate()),\".\").concat(this.digitFormat(r.getMonth()+1)).concat(n.getFullYear()!=r.getFullYear()||e?\".\".concat(this.digitFormat(r.getFullYear())):\"\",\" \")+o),o}},{key:\"timeStampStringDate\",value:function(t){var e=new Date(1e3*t);return\"\".concat(this.digitFormat(e.getDate()),\".\").concat(this.digitFormat(e.getMonth()+1),\".\").concat(this.digitFormat(e.getFullYear()))}},{key:\"timeStampStringTime\",value:function(t){var e=new Date(1e3*t);return\"\".concat(this.digitFormat(e.getHours()),\":\").concat(this.digitFormat(e.getMinutes()))}},{key:\"timeStampStringTimeInMinutes\",value:function(t){var e=new Date(1e3*t);return\"\".concat(this.digitFormat(e.getMinutes()),\":\").concat(this.digitFormat(e.getSeconds()))}},{key:\"sleep\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(function(e,n){return setTimeout(e,t)})}},{key:\"randomStr\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"1234567890abcdefghijklmnopqrstuvwxyABCDEFGHIJKLMNOPQRSTUVWXY\",n=\"\",r=t;r>0;r--)n+=e[Math.floor(Math.random()*e.length)];return n}},{key:\"randomNumber\",value:function(t){t||(t=7);var e=this.randomStr(t,\"1234567890\");return\"0\"===e[0]&&(e=e.replace(/^.{1}/g,\"1\")),parseInt(e)}},{key:\"digitFormat\",value:function(t){return(\"0\"+t).slice(-this.biggestNumber(t.toString().length,2))}},{key:\"onlyNumber\",value:function(t){return/^\\d+$/.test(t)}},{key:\"biggestNumber\",value:function(t,e){return t>=e?t:e}},{key:\"smallestNumber\",value:function(t,e){return t<e?t:e}},{key:\"createBlip\",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return mp.blips.new(t,new mp.Vector3(n.x,n.y,n.z||0),{shortRange:a,scale:this.blipBaseScale,color:e,name:r,dimension:o})}},{key:\"getRandomSpawn\",value:function(){return(0,t.randomArrayElement)([[new mp.Vector3(-1037.72,-2737.72,20.17),330]])}},{key:\"getDataByQuest\",value:function(t){return e.QUEST_SPAWN_ITEM.find(function(e){return e.questID===t})}},{key:\"getDataByQuestLine\",value:function(t){return e.QUEST_SPAWN_ITEM[t]}},{key:\"parseInt\",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){if(\"string\"==typeof t)return parseInt(t);Math.floor(t)})},{key:\"parseFloat\",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return t=\"string\"==typeof t?parseFloat(t):parseFloat(t.toFixed(2)),isNaN(t)&&(t=0),t})},{key:\"numberFormat\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];\"number\"!=typeof t&&(t=Number(t));var n=t.toFixed(2);return e&&(n=n.replace(\".00\",\"\")),n.replace(/.+?(?=\\D|$)/,function(t){return t.replace(/(\\d)(?=(?:\\d\\d\\d)+$)/g,\"$1 \")})}},{key:\"formatTime\",value:function(t){var e=Math.floor(t/60),n=t%60;return\"\".concat(this.digitFormat(e),\":\").concat(this.digitFormat(n))}},{key:\"getRandomInt\",value:function(t,e){return Math.floor(Math.random()*(e-t))+t}},{key:\"getRandomIntStep\",value:function(t,e,n){var r=this.getRandomInt(t,e),o=r%n;return o/n<.5?r-o:r-o+n}},{key:\"getRandomFloat\",value:function(){return this.getRandomInt(0,1e4)/1e4}},{key:\"daysInMonth\",value:function(t,e){return new Date(e,t,0).getDate()}},{key:\"distanceToPos\",value:function(t,e){return Math.abs(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2)))}},{key:\"distanceToPos2D\",value:function(t,e){return Math.abs(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}},{key:\"isPointInPoints\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return this.isPointInPointsIndex(t,e,n)>-1}},{key:\"isPointInPointsIndex\",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return t.z?e.findIndex(function(e){return n.distanceToPos(e,t)<=r}):e.findIndex(function(e){return n.distanceToPos2D(e,t)<=r})}},{key:\"isPointInRectangle2D\",value:function(t,e,n){var r=e.x>n.x?n.x:e.x,o=e.y>n.y?n.y:e.y,a=e.x>n.x?e.x:n.x,i=e.y>n.y?e.y:n.y;return t.x>=r&&t.y>=o&&t.x<=a&&t.y<=i}},{key:\"removeQuotes\",value:function(t){return\"string\"!=typeof t?t:t.replace(\"'\",\"\")}},{key:\"getDate\",value:function(){return new Date}},{key:\"getTimeStamp\",value:function(){return Date.now()/1e3|0}},{key:\"getTimeStampMS\",value:function(){return Number(new Date)}},{key:\"timestamp\",get:function(){return this.getTimeStamp()}},{key:\"getTimeAfter\",value:function(t){var e=this.timestamp;return e+=t.seconds?t.seconds:0,e+=t.minutes?60*t.minutes:0,e+=t.hours?60*t.hours*60:0}},{key:\"timestampMS\",get:function(){return this.getTimeStampMS()}},{key:\"generateTransaction\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"123456789QWERTYUIOPASDFGHJKLZXCVBNM\",r=[],o=0;o<e;o++)r.push(this.randomStr(t,n));return r.join(\"_\")}},{key:\"getWeatherName\",value:function(t){switch(t){case\"EXTRASUNNY\":case\"CLEAR\":return\"Ясно\";case\"CLOUDS\":return\"Облачно\";case\"SMOG\":return\"Смог\";case\"FOGGY\":return\"Туман\";case\"OVERCAST\":return\"Пасмурно\";case\"RAIN\":return\"Дождь\";case\"THUNDER\":return\"Гроза\";case\"CLEARING\":return\"Лёгкий дождь\";case\"SNOW\":case\"XMAS\":return\"Снег\"}return\"Ясно\"}},{key:\"addVectors\",value:function(t,e){return new mp.Vector3(t.x+e.x,t.y+e.y,t.z+e.z)}},{key:\"getVector3Mp\",value:function(t){return new mp.Vector3(t.x,t.y,t.z)}}])}();y.offsetPosition=l,y.drawPoint=c,y.blipBaseScale=.8,y.blipBaseNeeded=.9,y.TELEPORT_TIME=1e3,y.randomArrayElement=t.randomArrayElement,y.randomArrayElementIndex=t.randomArrayElementIndex;"},"sourceMaps":null,"error":null,"hash":"2c3821071fb15be6bd73e918082ec001","cacheData":{"env":{}}}