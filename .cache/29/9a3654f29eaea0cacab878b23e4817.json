{"id":"Caxd","dependencies":[{"name":"D:\\DETROIT\\server\\tsconfig.json","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\.babelrc","includedInParent":true,"mtime":1660943058000},{"name":"D:\\DETROIT\\server\\package.json","includedInParent":true,"mtime":1697927911090},{"name":"react","loc":{"line":1,"column":62,"index":62},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\DonateStorage.tsx","resolved":"D:\\DETROIT\\server\\node_modules\\react\\index.js"},{"name":"./style.less","loc":{"line":2,"column":7,"index":79},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\DonateStorage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\style.less"},{"name":"./assets/*.svg","loc":{"line":3,"column":16,"index":112},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\DonateStorage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\assets\\*.svg"},{"name":"../../../../../shared/inventory","loc":{"line":4,"column":64,"index":195},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\DonateStorage.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\inventory.ts"},{"name":"../../../../modules/custom.event","loc":{"line":5,"column":28,"index":259},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\DonateStorage.tsx","resolved":"D:\\DETROIT\\server\\src\\cef\\modules\\custom.event.ts"},{"name":"../../../../../shared/icons/*.png","loc":{"line":6,"column":19,"index":315},"parent":"D:\\DETROIT\\server\\src\\cef\\components\\UserMenu\\components\\DonateStorage\\DonateStorage.tsx","resolved":"D:\\DETROIT\\server\\src\\shared\\icons\\*.png"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=i(require(\"react\"));require(\"./style.less\");var t=o(require(\"./assets/*.svg\")),a=require(\"../../../../../shared/inventory\"),r=require(\"../../../../modules/custom.event\"),n=o(require(\"../../../../../shared/icons/*.png\"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(\"default\"!==o&&{}.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}function u(e,t){return m(e)||f(e,t)||s(e,t)||c()}function c(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function s(e,t){if(e){if(\"string\"==typeof e)return d(e,t);var a={}.toString.call(e).slice(8,-1);return\"Object\"===a&&e.constructor&&(a=e.constructor.name),\"Map\"===a||\"Set\"===a?Array.from(e):\"Arguments\"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function f(e,t){var a=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=a){var r,n,o,l,i=[],u=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=o.call(a)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(c)throw n}}return i}}function m(e){if(Array.isArray(e))return e}var y=function(){var o=u((0,e.useState)([]),2),l=o[0],i=o[1],c=u((0,e.useState)([]),2),s=c[0],d=c[1];(0,e.useLayoutEffect)(function(){var e=r.CustomEvent.register(\"donateStorage:setData\",function(e,t){d(e),i(t)});return r.CustomEvent.triggerServer(\"donateStorage:update\"),function(){return e.destroy()}},[]);var f=u((0,e.useState)({show:!1,name:\"\",styles:{display:\"none\",position:\"absolute\",left:\"0px\",top:\"0px\"},toStorage:!1}),2),m=f[0],y=f[1],g=u((0,e.useState)(-1),2),b=g[0],v=g[1],p=(0,e.useCallback)(function(e,t,r){var n,o=\"\";if(n=t?s.find(function(e){return e.id===r}):l.find(function(e){return e.id===r}),b&&(o=(0,a.getBaseItemNameById)(n.item_id),n.serial)){var i=a.inventoryShared.get(n.item_id);i&&i.type===a.ITEM_TYPE.CLOTH&&(o+=\" (\".concat(n.serial,\")\"))}y({show:!0,name:o,styles:{display:\"block\",position:\"absolute\",left:\"\".concat(.8*e.screenX,\"px\"),top:\"\".concat(.8*e.screenY,\"px\")},toStorage:t}),v(r)},[l,s]),S=(0,e.useCallback)(function(){y({show:!1,name:\"\",styles:{display:\"none\",position:\"absolute\",left:\"0px\",top:\"0px\"},toStorage:!1})},[]),_=(0,e.useCallback)(function(){b&&(r.CustomEvent.triggerServer(\"donateStorage:transfer\",b,m.toStorage),S())},[b,m]);return e.default.createElement(\"div\",{className:\"donateStorage\"},m.show&&e.default.createElement(\"div\",{className:\"donateStorage-menu\",style:m.styles},e.default.createElement(\"div\",{className:\"donateStorage-menu__name\"},m.name),e.default.createElement(\"div\",{className:\"donateStorage-menu__button\",onClick:function(){return _()}},e.default.createElement(\"img\",{src:t.default.arrow,alt:\"\"}),\"Положить в \",m.toStorage?\"хранилище\":\"инвентарь\")),e.default.createElement(\"div\",{className:\"donateStorage__title\"},\"Хранилище\"),e.default.createElement(\"div\",{className:\"donateStorage-body\"},e.default.createElement(\"div\",{className:\"donateStorage-body-block donateStorage-body-block-left\"},e.default.createElement(\"div\",{className:\"donateStorage-body-block__title\"},\"Ваш инвентарь\"),e.default.createElement(\"div\",{className:\"donateStorage-body-block__roominess\"},e.default.createElement(\"img\",{src:t.default.infinity,alt:\"\"}),\"кг\"),e.default.createElement(\"div\",{className:\"donateStorage-body-block-list\"},s.map(function(t,a){return e.default.createElement(\"div\",{className:\"donateStorage-body-block-list-slot\",key:a,onClick:function(e){return p(e,!0,t.id)}},e.default.createElement(\"img\",{src:n.default[\"Item_\".concat(t.item_id)],alt:\"\"}))}))),e.default.createElement(\"div\",{className:\"donateStorage-body-block\"},e.default.createElement(\"div\",{className:\"donateStorage-body-block__title\"},\"Хранилище\"),e.default.createElement(\"div\",{className:\"donateStorage-body-block__description\"},\"Тут хранятся только ваши донатные вещи\"),e.default.createElement(\"div\",{className:\"donateStorage-body-block__roominess\"},e.default.createElement(\"img\",{src:t.default.infinity,alt:\"\"}),\"кг\"),e.default.createElement(\"div\",{className:\"donateStorage-body-block-list\"},l.map(function(t,a){return e.default.createElement(\"div\",{className:\"donateStorage-body-block-list-slot\",key:a,onClick:function(e){return p(e,!1,t.id)}},e.default.createElement(\"img\",{src:n.default[\"Item_\".concat(t.item_id)],alt:\"\"}))})))))},g=exports.default=y;"},"sourceMaps":null,"error":null,"hash":"89bff6d089722b9b89fb2a606e44fec5","cacheData":{"env":{}}}